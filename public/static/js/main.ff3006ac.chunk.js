(this["webpackJsonpmyl-frontend"]=this["webpackJsonpmyl-frontend"]||[]).push([[0],{244:function(e,t,n){},278:function(e,t,n){},381:function(e,t,n){},387:function(e,t,n){},388:function(e,t,n){},389:function(e,t,n){},391:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(41),r=n.n(c),i=n(13),o=n(104),s=n(246),l=n(1),d="[auth] Login",u="[auth] Finish checking login state",j="[auth] Logout",b={checking:!0,logged:!1},O=n(8),p="[match] change",f="[match] change opponent",m="[match] set matchId",h="[match] set opponentId",x="[match] reset match",v="[match] set view cards origin",g="[match] set view cards destiny",y="[match] set x cards view",k="[match] set control opponent card",w="[match] set weapon",C={matchId:null,match:{},emmitChange:!0,opponentMatch:{},opponentId:null,viewCardsOrigin:[],viewCardsDestiny:[],amountCardsView:1,takeControlOpponentCardIndex:-1,takeControlOpponentCardZone:"",selectedWeapon:null},I="[typesCard] Load",z="[frecuenciesCard] Load",E="[racesCard] Load",S="[editionsCard] Load",T="[description] Rest",V={types:[],frecuencies:[],races:[],editions:[]},N="[card] Add new",D="[card] Load",R="[card] Load updating",A="[card] Reset updating",M="[card] Update",_="[card] By edition",P="[card] My select",q="[card] Reset my selection",B={cards:[],cardUpdating:null,cardsByEdition:[],selectMyCards:[]},F="[spin] Show",U="[spin] Hide",X={show:!1,text:""},L="[deck] Add new",G="[deck] Load",H="[deck] Load updating",W="[deck] Reset updating",K="[deck] Delete",J="[deck] Update",Z="[deck] Set default",Y={decks:[],deckUpdating:null,deckDefault:null},$="[ui-modal] Open modal ThrowXcards",Q="[ui-modal] Close modal ThrowXcards",ee="[ui-modal] Open modal ViewCastle",te="[ui-modal] Close modal ViewCastle",ne="[ui-modal] Open modal ViewXCastle",ae="[ui-modal] Close modal ViewXCastle",ce="[ui-modal] Open modal SelectXcards",re="[ui-modal] Close modal SelectXcards",ie="[ui-modal] Open modal ViewCastle Opponent",oe="[ui-modal] Close modal ViewCastle Opponent",se="[ui-modal] Open modal ViewCementery",le="[ui-modal] Close modal ViewCementery",de="[ui-modal] Open modal ViewExile",ue="[ui-modal] Close modal ViewExile",je="[ui-modal] Open modal ViewRemoval",be="[ui-modal] Close modal ViewRemoval",Oe="[ui-modal] Open modal ViewCementery Opponent",pe="[ui-modal] Close modal ViewCementery Opponent",fe="[ui-modal] Open modal ViewExile Opponent",me="[ui-modal] Close modal ViewExile Opponent",he="[ui-modal] Open modal ViewRemoval Opponent",xe="[ui-modal] Close modal ViewRemoval Opponent",ve="[ui-modal] Open modal ViewHand Opponent",ge="[ui-modal] Close modal ViewHand Opponent",ye="[ui-modal] Open modal Take Control Opponent Card",ke="[ui-modal] Close modal Take Control Opponent Card",we="[ui-modal] Open modal Assign Weapon",Ce="[ui-modal] Close modal Assign Weapon",Ie={modalOpenThrowXcards:!1,modalOpenViewCastle:!1,modalOpenViewXcards:!1,modalOpenSelectXcards:!1,modalOpenViewCastleToOpponent:!1,modalOpenViewCementery:!1,modalOpenViewExile:!1,modalOpenViewRemoval:!1,modalOpenViewCementeryOpponent:!1,modalOpenViewExileOpponent:!1,modalOpenViewRemovalOpponent:!1,modalOpenViewHandOpponent:!1,modalOpenTakeControlOpponentCard:!1,modalOpenAssignWeapon:!1},ze="[play] set active users",Ee={activeUsers:[]},Se="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,Te=Object(o.b)({match:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(l.a)(Object(l.a)({},e),{},{match:t.payload.match,emmitChange:t.payload.emmitChange});case f:return Object(l.a)(Object(l.a)({},e),{},{opponentMatch:Object(l.a)({},t.payload)});case m:return Object(l.a)(Object(l.a)({},e),{},{matchId:t.payload});case h:return Object(l.a)(Object(l.a)({},e),{},{opponentId:t.payload});case v:return Object(l.a)(Object(l.a)({},e),{},{viewCardsOrigin:Object(O.a)(t.payload)});case g:return Object(l.a)(Object(l.a)({},e),{},{viewCardsDestiny:Object(O.a)(t.payload)});case y:return Object(l.a)(Object(l.a)({},e),{},{amountCardsView:t.payload});case k:return Object(l.a)(Object(l.a)({},e),{},{takeControlOpponentCardIndex:t.payload.index,takeControlOpponentCardZone:t.payload.zone});case w:return Object(l.a)(Object(l.a)({},e),{},{selectedWeapon:t.payload});case x:return C;default:return e}},play:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;return t.type===ze?Object(l.a)(Object(l.a)({},e),{},{activeUsers:Object(O.a)(t.payload)}):e},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(l.a)(Object(l.a)(Object(l.a)({},e),t.payload),{},{checking:!1,logged:!0});case u:return Object(l.a)(Object(l.a)({},e),{},{checking:!1});case j:return{checking:!1,logged:!1};default:return e}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(l.a)(Object(l.a)({},e),{},{types:Object(O.a)(t.payload)});case z:return Object(l.a)(Object(l.a)({},e),{},{frecuencies:Object(O.a)(t.payload)});case E:return Object(l.a)(Object(l.a)({},e),{},{races:Object(O.a)(t.payload)});case S:return Object(l.a)(Object(l.a)({},e),{},{editions:Object(O.a)(t.payload)});case T:return V;default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(l.a)(Object(l.a)({},e),{},{cards:[].concat(Object(O.a)(e.cards),[t.payload]),cardUpdating:t.payload});case M:return Object(l.a)(Object(l.a)({},e),{},{cards:e.cards.map((function(e){return e.id===t.payload.id?t.payload:e}))});case D:return Object(l.a)(Object(l.a)({},e),{},{cards:Object(O.a)(t.payload)});case R:return Object(l.a)(Object(l.a)({},e),{},{cardUpdating:e.cards.find((function(e){return e.id===t.payload}))});case A:return Object(l.a)(Object(l.a)({},e),{},{cardUpdating:null});case _:return Object(l.a)(Object(l.a)({},e),{},{cardsByEdition:Object(O.a)(t.payload)});case P:return Object(l.a)(Object(l.a)({},e),{},{selectMyCards:Object(O.a)(t.payload)});case q:return Object(l.a)(Object(l.a)({},e),{},{cardsByEdition:[],selectMyCards:[]});default:return e}},spin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(l.a)(Object(l.a)({},e),{},{show:!0,text:t.payload});case U:return Object(l.a)(Object(l.a)({},e),X);default:return e}},decks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(l.a)(Object(l.a)({},e),{},{decks:[].concat(Object(O.a)(e.decks),[t.payload])});case G:return Object(l.a)(Object(l.a)({},e),{},{decks:Object(O.a)(t.payload),deckDefault:t.payload.find((function(e){return!0===e.byDefault}))});case H:return Object(l.a)(Object(l.a)({},e),{},{deckUpdating:e.decks.find((function(e){return e.id===t.payload}))});case W:return Object(l.a)(Object(l.a)({},e),{},{deckUpdating:null});case K:return Object(l.a)(Object(l.a)({},e),{},{decks:e.decks.filter((function(e){return e.id!==t.payload}))});case J:return Object(l.a)(Object(l.a)({},e),{},{decks:e.decks.map((function(e){return e.id===t.payload.id?t.payload:e}))});case Z:return Object(l.a)(Object(l.a)({},e),{},{decks:e.decks.map((function(e){return e.id===t.payload?Object(l.a)(Object(l.a)({},e),{},{byDefault:!0}):e})),deckDefault:e.decks.find((function(e){return e.id===t.payload}))});default:return e}},uiModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return Object(l.a)(Object(l.a)({},e),{},{modalOpenThrowXcards:!0});case Q:return Object(l.a)(Object(l.a)({},e),{},{modalOpenThrowXcards:!1});case ee:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCastle:!0});case te:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCastle:!1});case ne:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewXcards:!0});case ae:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewXcards:!1});case ce:return Object(l.a)(Object(l.a)({},e),{},{modalOpenSelectXcards:!0});case re:return Object(l.a)(Object(l.a)({},e),{},{modalOpenSelectXcards:!1});case ie:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCastleToOpponent:!0});case oe:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCastleToOpponent:!1});case se:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCementery:!0});case le:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCementery:!1});case de:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewExile:!0});case ue:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewExile:!1});case je:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewRemoval:!0});case be:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewRemoval:!1});case Oe:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCementeryOpponent:!0});case pe:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewCementeryOpponent:!1});case fe:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewExileOpponent:!0});case me:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewExileOpponent:!1});case he:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewRemovalOpponent:!0});case xe:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewRemovalOpponent:!1});case ve:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewHandOpponent:!0});case ge:return Object(l.a)(Object(l.a)({},e),{},{modalOpenViewHandOpponent:!1});case ye:return Object(l.a)(Object(l.a)({},e),{},{modalOpenTakeControlOpponentCard:!0});case ke:return Object(l.a)(Object(l.a)({},e),{},{modalOpenTakeControlOpponentCard:!1});case we:return Object(l.a)(Object(l.a)({},e),{},{modalOpenAssignWeapon:!0});case Ce:return Object(l.a)(Object(l.a)({},e),{},{modalOpenAssignWeapon:!1});default:return e}}}),Ve=Object(o.d)(Te,Se(Object(o.a)(s.a))),Ne=(n(278),n(254)),De=n(6),Re=n(2),Ae=Object(a.createContext)({hiddenMenu:!1,showMenu:function(){},hideMenu:function(){},selectedOption:"",setOptionMenu:function(){}}),Me=function(e){var t=e.children,n=Object(a.useState)(!1),c=Object(De.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(""),s=Object(De.a)(o,2),l=s[0],d=s[1];return Object(Re.jsx)(Ae.Provider,{value:{hiddenMenu:r,showMenu:function(){i(!1)},hideMenu:function(){i(!0)},selectedOption:l,setOptionMenu:function(e){d(e)}},children:t})},_e=n(247),Pe=n.n(_e),qe=function(e){var t=Object(a.useState)(null),n=Object(De.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(!1),o=Object(De.a)(i,2),s=o[0],l=o[1],d=Object(a.useCallback)((function(){var t=localStorage.getItem("token")||"",n=Pe()(e,{transports:["websocket"],autoConnect:!0,forceNew:!0,query:{"x-token":t}}).connect();r(n)}),[e]),u=Object(a.useCallback)((function(){null===c||void 0===c||c.disconnect()}),[c]);return Object(a.useEffect)((function(){l(null===c||void 0===c?void 0:c.connected)}),[c]),Object(a.useEffect)((function(){null===c||void 0===c||c.on("connect",(function(){return l(!0)}))}),[c]),Object(a.useEffect)((function(){null===c||void 0===c||c.on("disconnect",(function(){return l(!1)}))}),[c]),{socket:c,online:s,conectarSocket:d,desconectarSocket:u}},Be=Object(a.createContext)({online:!1}),Fe=function(e){var t=e.children,n=qe("http://localhost:8080"),c=n.socket,r=n.online,o=n.conectarSocket,s=n.desconectarSocket,l=Object(i.c)((function(e){return e.auth})),d=l.logged,u=l.id,j=Object(i.b)();return Object(a.useEffect)((function(){d&&o()}),[d,o]),Object(a.useEffect)((function(){d||s()}),[d,s]),Object(a.useEffect)((function(){null===c||void 0===c||c.on("active-users-list",(function(e){var t=e.filter((function(e){return e.id!==u}));j(function(e){return{type:ze,payload:e}}(t))}))}),[c,j,u]),Object(Re.jsx)(Be.Provider,{value:{socket:c,online:r},children:t})},Ue=n(50),Xe=n(26),Le=n(17),Ge=n.n(Le),He=n(34),We=["GET","POST","PUT","DELETE","PATCH"],Ke=function(e,t,n,a){if(!We.includes(n.toUpperCase()))throw new Error("Los m\xe9todos permitidos son ".concat(We.join(", ")));var c="".concat("http://localhost:8080","/").concat(e),r={method:n,headers:{}};return t instanceof FormData||(r.headers["Content-type"]="application/json"),a&&(r.headers["x-token"]=a),"GET"!==n.toUpperCase()&&(r.body=t instanceof FormData?t:JSON.stringify(t)),fetch(c,r)},Je=function(e){return{type:d,payload:e}},Ze=function(){return{type:j}},Ye=n(262),$e=function(e){return function(){var t=Object(He.a)(Ge.a.mark((function t(n){var a,c,r;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token"),t.next=4,Ke("api/card",e,"POST",a);case 4:return c=t.sent,t.next=7,c.json();case 7:r=t.sent,201===c.status?(n(ct(r)),Ye.b.success('Carta "'.concat(r.name,'" creada correctamente'))):(console.log(c),Ye.b.error("Error al crear carta")),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),Ye.b.error("Error al crear carta!");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},Qe=function(e,t){return function(){var n=Object(He.a)(Ge.a.mark((function n(a){var c,r,i;return Ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=localStorage.getItem("token"),n.next=4,Ke("api/card/"+e,t,"PUT",c);case 4:return r=n.sent,n.next=7,r.json();case 7:i=n.sent,200===r.status?(a(rt(i)),Ye.b.success('Carta "'.concat(i.name,'" actualizada correctamente'))):(console.log(r),Ye.b.error("Error al actualizar carta")),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0),Ye.b.error("Error al actualizar carta!");case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},et=function(){return function(){var e=Object(He.a)(Ge.a.mark((function e(t){var n,a,c;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),e.next=4,Ke("api/card",{},"GET",n);case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,200===a.status?t(at(c)):Ye.b.error("Error al obtener cartas"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),Ye.b.error("Error al obtener cartas!");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},tt=function(){return{type:A}},nt=function(e){return{type:R,payload:e}},at=function(e){return{type:D,payload:e}},ct=function(e){return{type:N,payload:e}},rt=function(e){return{type:M,payload:e}},it=function(e){return{type:_,payload:e}},ot=function(e){return{type:P,payload:e}},st=function(){return{type:q}},lt=function(e){return{type:I,payload:e}},dt=function(e){return{type:z,payload:e}},ut=function(e){return{type:E,payload:e}},jt=function(e){return{type:S,payload:e}},bt=n(396),Ot=n(397),pt=n(398),ft=n(407),mt=n(406),ht=n(258),xt=n(52),vt=n(420),gt=n(421),yt=ft.a.Title,kt=function(){var e=Object(i.b)();return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(yt,{level:1,children:"Iniciar Sesi\xf3n"}),Object(Re.jsxs)(mt.a,{name:"normal_login",className:"login-form",onFinish:function(t){var n=t.email,a=t.password;e(function(e,t){return function(){var n=Object(He.a)(Ge.a.mark((function n(a){var c,r;return Ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Ke("api/auth/login",{email:e,password:t},"POST");case 3:return c=n.sent,n.next=6,c.json();case 6:r=n.sent,200===c.status?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime().toString()),a(Je({id:r.user.id,name:r.user.name,lastname:r.user.lastname,email:r.user.email,username:r.user.username,role:r.user.role,status:r.user.status,online:r.user.online,playing:r.user.playing,defeats:r.user.defeats}))):console.log(r.msg),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}(n,a))},autoComplete:"off",children:[Object(Re.jsx)(mt.a.Item,{name:"email",rules:[{type:"email",message:"Correo inv\xe1lido"},{required:!0,message:"Por favor ingresa tu correo"}],children:Object(Re.jsx)(ht.a,{type:"text",prefix:Object(Re.jsx)(vt.a,{className:"site-form-item-icon"}),placeholder:"Correo"})}),Object(Re.jsx)(mt.a.Item,{name:"password",rules:[{required:!0,message:"Por favor ingresa tu contrase\xf1a"}],children:Object(Re.jsx)(ht.a,{prefix:Object(Re.jsx)(gt.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Contrase\xf1a"})}),Object(Re.jsxs)(mt.a.Item,{children:[Object(Re.jsx)(xt.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0,children:"Ingresar"}),"O",Object(Re.jsx)(Ue.b,{to:"/auth/register",children:" registrate!"})]})]})]})},wt=(n(381),ft.a.Title),Ct=function(){var e=Object(i.b)();return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(wt,{level:1,children:"Registro"}),Object(Re.jsxs)(mt.a,{name:"normal_login",className:"login-form",onFinish:function(t){console.log(t);var n=t.email,a=t.password,c=t.name,r=t.lastname,i=t.username;e(function(e,t,n,a,c){return function(){var r=Object(He.a)(Ge.a.mark((function r(i){var o,s;return Ge.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Ke("api/auth/register",{name:e,lastname:t,email:n,username:a,password:c},"POST");case 3:return o=r.sent,r.next=6,o.json();case 6:s=r.sent,201===o.status?(localStorage.setItem("token",s.token),localStorage.setItem("token-init-date",(new Date).getTime().toString()),i(Je({id:s.user.id,name:s.user.name,lastname:s.user.lastname,email:s.user.email,username:s.user.username,role:s.user.role,status:s.user.status,online:s.user.online,playing:s.user.playing,defeats:s.user.defeats}))):console.log(s.msg),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()}(c,r,n,i,a))},autoComplete:"off",children:[Object(Re.jsx)(mt.a.Item,{name:"name",rules:[{required:!0,message:"Por favor ingrese su nombre"}],children:Object(Re.jsx)(ht.a,{type:"text",prefix:Object(Re.jsx)(vt.a,{className:"site-form-item-icon"}),placeholder:"Nombre"})}),Object(Re.jsx)(mt.a.Item,{name:"lastname",rules:[{required:!0,message:"Por favor ingrese su apellido"}],children:Object(Re.jsx)(ht.a,{type:"text",prefix:Object(Re.jsx)(vt.a,{className:"site-form-item-icon"}),placeholder:"Apellido"})}),Object(Re.jsx)(mt.a.Item,{name:"email",rules:[{type:"email",message:"Correo inv\xe1lido"},{required:!0,message:"Por favor ingresa tu correo"}],children:Object(Re.jsx)(ht.a,{type:"text",prefix:Object(Re.jsx)(vt.a,{className:"site-form-item-icon"}),placeholder:"Correo"})}),Object(Re.jsx)(mt.a.Item,{name:"username",rules:[{required:!0,message:"Por favor ingrese su nombre de usuario"}],children:Object(Re.jsx)(ht.a,{type:"text",prefix:Object(Re.jsx)(vt.a,{className:"site-form-item-icon"}),placeholder:"Nombre de usuario"})}),Object(Re.jsx)(mt.a.Item,{name:"password",rules:[{required:!0,message:"Por favor ingresa tu contrase\xf1a"}],children:Object(Re.jsx)(ht.a,{prefix:Object(Re.jsx)(gt.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Contrase\xf1a"})}),Object(Re.jsx)(mt.a.Item,{name:"password2",rules:[{required:!0,message:"Por favor ingresa tu contrase\xf1a"}],children:Object(Re.jsx)(ht.a,{prefix:Object(Re.jsx)(gt.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Repetir contrase\xf1a"})}),Object(Re.jsxs)(mt.a.Item,{children:[Object(Re.jsx)(xt.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0,children:"Aceptar"}),"O",Object(Re.jsx)(Ue.b,{to:"/auth/login",children:" inicia sesi\xf3n!"})]})]})]})},It=bt.a.Content,zt=function(){return Object(Re.jsx)(bt.a,{className:"site-layout",style:{height:"100vh"},children:Object(Re.jsx)(It,{className:"site-layout-background",style:{padding:24},children:Object(Re.jsx)("div",{style:{padding:24},children:Object(Re.jsx)(Ot.a,{justify:"space-around",align:"middle",children:Object(Re.jsx)(pt.a,{xs:24,sm:12,md:9,lg:9,xl:6,children:Object(Re.jsxs)(Xe.d,{children:[Object(Re.jsx)(Xe.b,{exact:!0,path:"/auth/login",component:kt}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/auth/register",component:Ct}),Object(Re.jsx)(Xe.a,{to:"/auth/login"})]})})})})})})},Et=n(12),St=["isAuthenticated","component"],Tt=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Et.a)(e,St),c=n;return Object(Re.jsx)(Xe.b,Object(l.a)(Object(l.a)({},a),{},{component:function(e){return t?Object(Re.jsx)(c,Object(l.a)({},e)):Object(Re.jsx)(Xe.a,{to:"/auth/login"})}}))},Vt=["isAuthenticated","component"],Nt=function(e){var t=e.isAuthenticated,n=e.component,a=Object(Et.a)(e,Vt),c=n;return Object(Re.jsx)(Xe.b,Object(l.a)(Object(l.a)({},a),{},{component:function(e){return t?Object(Re.jsx)(Xe.a,{to:"/"}):Object(Re.jsx)(c,Object(l.a)({},e))}}))},Dt=n(263),Rt=n(108),At=n(399),Mt=n(425),_t=n(426),Pt=n(427),qt=n(428),Bt=n(414),Ft=n(412),Ut=n(415),Xt=n(416),Lt=n(404),Gt=n(413),Ht=n(125),Wt=n.n(Ht),Kt=n(139),Jt=function(e,t){var n=Object(a.useContext)(Ae),c=n.showMenu,r=n.hideMenu,i=n.setOptionMenu;Object(a.useEffect)((function(){e?r():c()}),[e,c,r]),Object(a.useEffect)((function(){i(t)}),[t,i])},Zt=function(){return function(){var e=Object(He.a)(Ge.a.mark((function e(t){var n,a,c;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),e.next=4,Ke("api/deck",{},"GET",n);case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,200===a.status?t(en(c)):Ye.b.error("Error al obtener mazos"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),Ye.b.error("Error al obtener mazos!");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},Yt=function(e){return{type:H,payload:e}},$t=function(){return{type:W}},Qt=function(e){return{type:Z,payload:e}},en=function(e){return{type:G,payload:e}},tn=function(e){return{type:L,payload:e}},nn=function(e){return{type:J,payload:e}},an=function(e){return{type:K,payload:e}},cn=function(){var e=Object(Xe.h)().pathname.replace("/","");Jt(!1,e);var t=Object(i.b)(),n=Object(i.c)((function(e){return e.play})).activeUsers,c=Object(i.c)((function(e){return e.decks})).decks,r=Object(a.useState)(""),o=Object(De.a)(r,2),s=o[0],d=o[1],u=Object(a.useState)(""),j=Object(De.a)(u,2),b=j[0],O=j[1],p=Object(a.useContext)(Be).socket,f=Object(a.useRef)();Object(a.useEffect)((function(){t(tt()),t(st())}),[t]),Object(a.useEffect)((function(){0===c.length&&t(Zt())}),[t,c.length]);var m,h=function(e,t,n){t(),d(e[0]),O(n)},x=function(e,t,n){var a=10,c=Ft.a.info({title:"Esperando confirmaci\xf3n",content:'El usuario "'.concat(e,'" tiene ').concat(a," segundos para confirmar"),okButtonProps:{hidden:!0},onCancel:function(){return function(e,t){clearInterval(m),null===p||void 0===p||p.emit("cancele-invitation",{opponentId:e,key:t})}(t,n)}});m=setInterval((function(){a-=1,c.update({content:'El usuario "'.concat(e,'" tiene ').concat(a," segundos para confirmar")})}),1e3),setTimeout((function(){clearInterval(m)}),1e3*a),setTimeout((function(){c.destroy()}),1050*a)};Object(a.useEffect)((function(){return null===p||void 0===p||p.on("go-match",(function(e){Ft.a.destroyAll()})),function(){clearInterval(m)}}),[p,m]);var v,g,y=[Object(l.a)(Object(l.a)({title:"Usuario",dataIndex:"username",key:"username",width:"30%"},(v="username",g=f,{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,a=e.confirm,c=e.clearFilters;return Object(Re.jsxs)("div",{style:{padding:8},children:[Object(Re.jsx)(ht.a,{ref:g,placeholder:"Buscar por ".concat(v),value:n[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return h(n,a,v)},style:{marginBottom:8,display:"block"}}),Object(Re.jsxs)(Bt.b,{children:[Object(Re.jsx)(xt.a,{type:"primary",onClick:function(){return h(n,a,v)},icon:Object(Re.jsx)(Kt.a,{}),size:"small",style:{width:90},children:"Search"}),Object(Re.jsx)(xt.a,{onClick:function(){return function(e){e(),d("")}(c)},size:"small",style:{width:90},children:"Reset"}),Object(Re.jsx)(xt.a,{type:"link",size:"small",onClick:function(){a({closeDropdown:!1}),d(n[0]),O(v)},children:"Filter"})]})]})},filterIcon:function(e){return Object(Re.jsx)(Kt.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,t){return t[v]?t[v].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return g.current.select()}),100)},render:function(e){return b===v?Object(Re.jsx)(Wt.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[s],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{},{sorter:function(e,t){return e.username<t.username?-1:e.username>t.username?1:0},sortDirections:["descend","ascend"]}),{title:"Victorias",dataIndex:"victories",key:"victories",width:"10%",sorter:function(e,t){return e.victories<t.victories?-1:e.victories>t.victories?1:0},sortDirections:["descend","ascend"]},{title:"Derrotas",dataIndex:"defeats",key:"defeats",width:"10%",sorter:function(e,t){return e.defeats<t.defeats?-1:e.defeats>t.defeats?1:0},sortDirections:["descend","ascend"]},{title:"Estado",dataIndex:"online",key:"online",width:"30%",sorter:function(e,t){return e.online<t.online?-1:e.online>t.online?1:0},sortDirections:["descend","ascend"],render:function(e,t){return t.online?Object(Re.jsx)(Ut.a,{color:"lime",children:"Online"}):Object(Re.jsx)(Ut.a,{color:"magneta",children:"Desconectado"})}},{title:"\xbfJugando?",dataIndex:"playing",key:"playing",width:"30%",sorter:function(e,t){return e.playing<t.playing?-1:e.playing>t.playing?1:0},sortDirections:["descend","ascend"],render:function(e,t){return t.playing?Object(Re.jsx)(Ut.a,{color:"volcano",children:"Jugando..."}):"No"}},{title:"",dataIndex:"",key:"x",render:function(e,t){if(!t.playing&&t.online)return Object(Re.jsx)(xt.a,{onClick:function(){return function(e,t){var n=Object(Gt.a)();null===p||void 0===p||p.emit("invite",{opponentId:e,key:n}),x(t,e,n)}(t.id,t.username)},ghost:!0,children:"Invitar a jugar"})}}];return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(Xt.a,{style:{width:"100%",marginBottom:10},message:"En esta secci\xf3n podr\xe1s elegir contra qui\xe9n jugar. S\xf3lo aparecen los usuarios que al menos tiene un mazo creado",type:"info",showIcon:!0}),Object(Re.jsx)(Lt.a,{pagination:{defaultPageSize:15},rowKey:"id",columns:y,dataSource:n,style:{paddingTop:10}})]})},rn=(n(244),n(57)),on=n(418),sn=function(){var e=Object(Xe.g)(),t=Object(Xe.h)().pathname.replace("/","");Jt(!1,t);var n=Object(i.b)(),c=Object(i.c)((function(e){return e.cards})).cards;Object(a.useEffect)((function(){n(tt()),n(st())}),[n]);var r=Object(a.useState)(""),o=Object(De.a)(r,2),s=o[0],d=o[1],u=Object(a.useState)(""),j=Object(De.a)(u,2),b=j[0],O=j[1],p=function(e,t,n){t(),d(e[0]),O(n)},f=Object(a.useRef)(),m=Object(a.useRef)(),h=Object(a.useRef)(),x=Object(a.useRef)(),v=Object(a.useRef)(),g=function(e,t){return{filterDropdown:function(n){var a=n.setSelectedKeys,c=n.selectedKeys,r=n.confirm,i=n.clearFilters;return Object(Re.jsxs)("div",{style:{padding:8},children:[Object(Re.jsx)(ht.a,{ref:t,placeholder:"Buscar por ".concat(e),value:c[0],onChange:function(e){return a(e.target.value?[e.target.value]:[])},onPressEnter:function(){return p(c,r,e)},style:{marginBottom:8,display:"block"}}),Object(Re.jsxs)(Bt.b,{children:[Object(Re.jsx)(xt.a,{type:"primary",onClick:function(){return p(c,r,e)},icon:Object(Re.jsx)(Kt.a,{}),size:"small",style:{width:90},children:"Search"}),Object(Re.jsx)(xt.a,{onClick:function(){return function(e){e(),d("")}(i)},size:"small",style:{width:90},children:"Reset"}),Object(Re.jsx)(xt.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),d(c[0]),O(e)},children:"Filter"})]})]})},filterIcon:function(e){return Object(Re.jsx)(Kt.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return t.current.select()}),100)},render:function(t){return b===e?Object(Re.jsx)(Wt.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[s],autoEscape:!0,textToHighlight:t?t.toString():""}):t}}},y=[Object(l.a)(Object(l.a)({title:"N\xfamero",dataIndex:"num",key:"num",width:"5%"},g("num",f)),{},{sorter:function(e,t){return e.num-t.num},sortDirections:["descend","ascend"]}),Object(l.a)(Object(l.a)({title:"Nombre",dataIndex:"name",key:"name",width:"30%"},g("name",m)),{},{sorter:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},sortDirections:["descend","ascend"],render:function(e,t){return Object(Re.jsx)(Ue.b,{to:"/cards/".concat(t.id,"/edit"),children:e})}}),Object(l.a)(Object(l.a)({title:"Edici\xf3n",dataIndex:"edition",key:"edition",width:"20%"},g("edition",h)),{},{sortDirections:["descend","ascend"],sorter:function(e,t){return e.edition<t.edition?-1:e.edition>t.edition?1:0}}),Object(l.a)(Object(l.a)({title:"Tipo",dataIndex:"type",key:"type",width:"20%"},g("type",x)),{},{sortDirections:["descend","ascend"],sorter:function(e,t){return e.type<t.type?-1:e.type>t.type?1:0}}),Object(l.a)(Object(l.a)({title:"Raza",dataIndex:"race",key:"race",width:"20%"},g("race",x)),{},{sortDirections:["descend","ascend"],sorter:function(e,t){return e.race<t.race?-1:e.race>t.race?1:0}}),Object(l.a)(Object(l.a)({title:"Frecuencia",dataIndex:"frecuency",key:"frecuency"},g("frecuency",v)),{},{sortDirections:["descend","ascend"],sorter:function(e,t){return e.frecuency<t.frecuency?-1:e.frecuency>t.frecuency?1:0}}),{title:"",dataIndex:"",key:"x",render:function(e,t){return Object(Re.jsx)(At.a,{title:"\xbfEst\xe1 seguro?",onConfirm:function(){t.id},children:Object(Re.jsx)(Ue.b,{to:"",children:"Eliminar"})})}}];return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(rn.a,{title:"Agregar carta",children:Object(Re.jsx)(xt.a,{onClick:function(){e.push("/cards/new")},type:"primary",shape:"circle",icon:Object(Re.jsx)(on.a,{})})}),Object(Re.jsx)(Lt.a,{pagination:{defaultPageSize:15},rowKey:"id",columns:y,dataSource:c,style:{paddingTop:10}})]})},ln=n(70),dn=n(400),un=n(409),jn=n(162),bn=n(417),On=n(405),pn=n(408),fn=n(419),mn=function(e){return{type:F,payload:e}},hn=function(){return{type:U}},xn=(n(387),ft.a.Title),vn=ht.a.TextArea,gn=function(){Jt(!1,"cards");var e=Object(Xe.i)(),t=Object(i.b)(),n=Object(i.c)((function(e){return e.cards})),c=n.cardUpdating,r=n.cards,o=Object(a.useState)([]),s=Object(De.a)(o,2),d=s[0],u=s[1],j=Object(a.useState)(!1),b=Object(De.a)(j,2),O=b[0],p=b[1],f=Object(a.useState)(!1),m=Object(De.a)(f,2),h=m[0],x=m[1],v=Object(a.useState)(!0),g=Object(De.a)(v,2),y=g[0],k=g[1],w=Object(a.useState)(),C=Object(De.a)(w,2),I=C[0],z=C[1],E=Object(a.useState)(""),S=Object(De.a)(E,2),T=S[0],V=S[1],N=Object(i.c)((function(e){return e.description})),D=N.types,R=N.frecuencies,A=N.editions,M=N.races,_=Object(Xe.g)();Object(a.useEffect)((function(){function n(){return(n=Object(He.a)(Ge.a.mark((function n(){return Ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(et());case 2:return n.next=4,t(nt(e.id));case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}e.id&&"undefined"!==e.id&&(0===r.length?function(){n.apply(this,arguments)}():t(nt(e.id)))}),[e.id,t,r.length]),Object(a.useEffect)((function(){if(c){var e=[{name:"num",value:c.num},{name:"name",value:c.name},{name:"ability",value:c.ability},{name:"legend",value:c.legend},{name:"type",value:c.type},{name:"frecuency",value:c.frecuency},{name:"edition",value:c.edition},{name:"race",value:c.race},{name:"cost",value:c.cost},{name:"strength",value:c.strength}];u(e),c.isMachinery&&k(!1),p(c.isMachinery),x(c.isUnique),V(c.edition)}}),[c]);var P=function(){var e=Object(He.a)(Ge.a.mark((function e(n){var a,r,i,o,s,l;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new FormData,i=Object(ln.a)(D),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=11;break}if("Arma"!==(s=o.value).name){e.next=9;break}return r=s.id,e.abrupt("break",11);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),i.e(e.t0);case 16:return e.prev=16,i.f(),e.finish(16);case 19:for(l in n)(n[l]||0===n.strength)&&a.append(l,n[l]);if(n.type!==r?a.append("isMachinery","false"):O&&a.append("isMachinery","true"),h?a.append("isUnique","true"):a.append("isUnique","false"),c){e.next=34;break}if(I){e.next=26;break}return Ye.b.error("Debe adjuntar una imagen"),e.abrupt("return");case 26:return a.append("files[]",I),t(mn("Guardando carta...")),e.next=30,t($e(a));case 30:t(hn()),_.replace("/cards"),e.next=44;break;case 34:if(!I){e.next=40;break}if("image/jpeg"===I.type||"image/png"===I.type){e.next=39;break}return Ye.b.error("Solo se pueden subir im\xe1genes"),e.abrupt("return");case 39:a.append("files[]",I);case 40:return t(mn("Guardando carta...")),e.next=43,t(Qe(null===c||void 0===c?void 0:c.id,a));case 43:t(hn());case 44:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(rn.a,{className:"actions",title:"Volver al listado",children:Object(Re.jsx)(xt.a,{onClick:function(){(null===c||void 0===c?void 0:c.id)&&(null===c||void 0===c||c.img),_.push("/cards")},type:"primary",shape:"circle",icon:Object(Re.jsx)(fn.a,{})})}),Object(Re.jsx)(dn.a,{}),Object(Re.jsx)(xn,{level:1,children:c?"Modificar Carta":"Crear Carta"}),Object(Re.jsxs)(mt.a,{labelCol:{span:7},wrapperCol:{span:9},layout:"horizontal",autoComplete:"off",onFinish:P,fields:d,children:[Object(Re.jsx)(mt.a.Item,{label:"N\xfamero",name:"num",children:Object(Re.jsx)(un.a,{style:{width:"100%"},min:1})}),Object(Re.jsx)(mt.a.Item,{label:"Nombre",name:"name",rules:[{required:!0,message:"Por favor ingrese el nombre de la carta"}],children:Object(Re.jsx)(ht.a,{})}),Object(Re.jsx)(mt.a.Item,{label:"Habilidad",name:"ability",children:Object(Re.jsx)(vn,{autoSize:{minRows:3,maxRows:5}})}),Object(Re.jsx)(mt.a.Item,{label:"Leyenda",name:"legend",children:Object(Re.jsx)(vn,{autoSize:{minRows:3,maxRows:5}})}),Object(Re.jsx)(mt.a.Item,{label:"Tipo",name:"type",rules:[{required:!0,message:"Por favor seleccione el tipo de carta"}],children:Object(Re.jsx)(jn.a,{placeholder:"Seleccione una opci\xf3n",onChange:function(e){var t,n=Object(ln.a)(D);try{for(n.s();!(t=n.n()).done;){var a=t.value;e===a.id&&"Arma"===a.name?k(!1):(k(!0),p(!1))}}catch(c){n.e(c)}finally{n.f()}},style:{width:"100%"},children:D.length>0&&D.map((function(e){return Object(Re.jsx)(jn.a.Option,{value:e.id,children:e.name},e.id)}))})}),Object(Re.jsx)(mt.a.Item,{label:"\xbfEs maquinaria?",valuePropName:"isMachinery",children:Object(Re.jsx)(bn.a,{disabled:y,onChange:function(e){p(e)},checked:O})}),Object(Re.jsx)(mt.a.Item,{label:"Frecuencia",name:"frecuency",rules:[{required:!0,message:"Por favor seleccione la frecuencia de la carta"}],children:Object(Re.jsx)(jn.a,{placeholder:"Seleccione una opci\xf3n",style:{width:"100%"},children:R.length>0&&R.map((function(e){return Object(Re.jsx)(jn.a.Option,{value:e.id,children:e.name},e.id)}))})}),Object(Re.jsx)(mt.a.Item,{label:"Edici\xf3n",name:"edition",rules:[{required:!0,message:"Por favor seleccione la edici\xf3n de la carta"}],children:Object(Re.jsx)(jn.a,{placeholder:"Seleccione una opci\xf3n",style:{width:"100%"},onChange:function(e){var t,n=Object(ln.a)(A);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id===e){V(a.name);break}}}catch(r){n.e(r)}finally{n.f()}u(c?function(e){return e.map((function(e){return"race"===e.name?Object(l.a)(Object(l.a)({},e),{},{value:""}):e}))}:[{name:"race",value:""}])},children:A.length>0&&A.map((function(e){return Object(Re.jsx)(jn.a.Option,{value:e.id,children:e.name},e.id)}))})}),Object(Re.jsx)(mt.a.Item,{label:"Raza",name:"race",children:Object(Re.jsx)(jn.a,{placeholder:"Seleccione una opci\xf3n",style:{width:"100%"},children:M.length>0&&M.filter((function(e){return function(e){var t,n=Object(ln.a)(A);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id===e)return a.name}}catch(c){n.e(c)}finally{n.f()}}(e.edition)===T})).map((function(e){return Object(Re.jsx)(jn.a.Option,{value:e.id,children:e.name},e.id)}))})}),Object(Re.jsx)(mt.a.Item,{label:"Coste",name:"cost",children:Object(Re.jsx)(un.a,{style:{width:"100%"},min:0})}),Object(Re.jsx)(mt.a.Item,{label:"Fuerza",name:"strength",children:Object(Re.jsx)(un.a,{style:{width:"100%"},min:0})}),Object(Re.jsx)(mt.a.Item,{label:"\xbfEs \xfanica?",valuePropName:"isUnique",children:Object(Re.jsx)(bn.a,{checked:h,onChange:function(e){x(e)}})}),Object(Re.jsx)(mt.a.Item,{label:"Imagen",children:Object(Re.jsx)(On.a,{listType:"picture",multiple:!1,beforeUpload:function(e){return z(e),!1},onRemove:function(e){z(null)},children:Object(Re.jsxs)(xt.a,{type:"dashed",disabled:I,children:[" ",(null===c||void 0===c?void 0:c.img)?"Imagen de la BD":"Selecciona una imagen"]})})}),Object(Re.jsx)(mt.a.Item,{className:"label-custom",label:"preview",children:c&&!I&&Object(Re.jsx)(pn.a,{width:200,src:c.img})}),Object(Re.jsx)(mt.a.Item,{className:"label-custom",label:".",children:Object(Re.jsx)(xt.a,{type:"primary",htmlType:"submit",className:"login-form-button",block:!0,children:c?"Modificar":"Crear"})})]})]})},yn=function(){var e=Object(Xe.h)().pathname.replace("/","");Jt(!1,e);var t=Object(i.b)();return Object(a.useEffect)((function(){t(tt()),t(st())}),[t]),Object(Re.jsx)("div",{children:"Users"})},kn=function(){var e=Object(Xe.h)().pathname.replace("/","");Jt(!1,e);var t=Object(Xe.g)(),n=Object(i.b)(),c=Object(i.c)((function(e){return e.decks})),r=c.decks,o=c.deckDefault;Object(a.useEffect)((function(){n(Zt()),n($t()),n(tt())}),[n]);var s,d,u=Object(a.useState)(""),j=Object(De.a)(u,2),b=j[0],O=j[1],p=Object(a.useState)(""),f=Object(De.a)(p,2),m=f[0],h=f[1],x=function(e,t,n){t(),O(e[0]),h(n)},v=function(e){var t;n((t=e,function(){var e=Object(He.a)(Ge.a.mark((function e(n){var a;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),e.next=4,Ke("api/deck/"+t,{},"DELETE",a);case 4:200===e.sent.status?n(an(t)):Ye.b.error("Error al eliminar mazos"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),Ye.b.error("Error al eliminar mazos!");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},g=Object(a.useRef)(),y=[Object(l.a)(Object(l.a)({title:"Nombre",dataIndex:"name",key:"name",width:"90%"},(s="name",d=g,{filterDropdown:function(e){var t=e.setSelectedKeys,n=e.selectedKeys,a=e.confirm,c=e.clearFilters;return Object(Re.jsxs)("div",{style:{padding:8},children:[Object(Re.jsx)(ht.a,{ref:d,placeholder:"Buscar por ".concat(s),value:n[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return x(n,a,s)},style:{marginBottom:8,display:"block"}}),Object(Re.jsxs)(Bt.b,{children:[Object(Re.jsx)(xt.a,{type:"primary",onClick:function(){return x(n,a,s)},icon:Object(Re.jsx)(Kt.a,{}),size:"small",style:{width:90},children:"Search"}),Object(Re.jsx)(xt.a,{onClick:function(){return function(e){e(),O("")}(c)},size:"small",style:{width:90},children:"Reset"}),Object(Re.jsx)(xt.a,{type:"link",size:"small",onClick:function(){a({closeDropdown:!1}),O(n[0]),h(s)},children:"Filter"})]})]})},filterIcon:function(e){return Object(Re.jsx)(Kt.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,t){return t[s]?t[s].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return d.current.select()}),100)},render:function(e){return m===s?Object(Re.jsx)(Wt.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[b],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{},{sorter:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},sortDirections:["descend","ascend"],render:function(e,t){return Object(Re.jsx)(Ue.b,{to:"/decks/".concat(t.id,"/edit"),children:e})}}),{title:"",dataIndex:"",key:"x",render:function(e,t){return Object(Re.jsx)(At.a,{title:"\xbfEst\xe1 seguro?",onConfirm:function(){return v(t.id)},children:Object(Re.jsx)(Ue.b,{to:"",children:"Eliminar"})})}}],k={onChange:function(e){console.log("selectedRowKeys1: ".concat(e));var t=e.toString();n(function(e){return console.log("object"),function(){var t=Object(He.a)(Ge.a.mark((function t(n){var a;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token"),t.next=4,Ke("api/deck/"+e,{},"PATCH",a);case 4:200===t.sent.status?n(Qt(e)):Ye.b.error("Error al actualizar mazo por defecto"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),Ye.b.error("Error al actualizar mazo por defecto!");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}};return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(rn.a,{title:"Crear nuevo Mazo",children:Object(Re.jsx)(xt.a,{onClick:function(){t.push("/decks/new")},type:"primary",shape:"circle",icon:Object(Re.jsx)(on.a,{})})}),Object(Re.jsx)(Xt.a,{style:{marginTop:10},message:"En esta secci\xf3n podr\xe1s crear tus mazos. Si no tiene al menos un mazo creado no podr\xe1s jugar",type:"info",showIcon:!0}),Object(Re.jsx)(Lt.a,{rowSelection:Object(l.a)(Object(l.a)({type:"radio"},k),{},{selectedRowKeys:[null===o||void 0===o?void 0:o.id]}),pagination:{defaultPageSize:15},rowKey:"id",columns:y,dataSource:r,style:{paddingTop:10}})]})},wn=n(128),Cn=n.n(wn),In=n(410),zn=function(e){var t=e.children,n=e.title,a=Object(i.c)((function(e){return e.cards})).selectMyCards,c=Object(In.a)({accept:"card",drop:function(){return{name:n}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}},canDrop:function(e){return!(a.length>=50&&"my-cards"===n)}}),r=Object(De.a)(c,2)[1];return Object(Re.jsx)("div",{ref:r,style:{height:"100vh"},children:t})},En=n(411),Sn=function(e){var t=e.id,n=e.index,c=e.moveCard,r=e.zone,o=e.card,s=Object(i.b)(),d=Object(a.useRef)(null),u=Object(i.c)((function(e){return e.cards})),j=u.cardsByEdition,b=u.selectMyCards,p=function(e,t){if(e.zone!==t)if("my-cards"===t){var a=j.find((function(t){return t.id===e.id})),c=[].concat(Object(O.a)(b),[a]);s(ot(c))}else{var r,i=null===(r=j[0])||void 0===r?void 0:r.edition,o=b[n];if(o.edition===i)j.find((function(e){return e.id===o.id}))||s(it([].concat(Object(O.a)(j),[o])));b.splice(n,1),s(ot(b))}},f=Object(In.a)({accept:"card",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(d.current){var r=e.index,i=n;if(r!==i){var o=null===(a=d.current)||void 0===a?void 0:a.getBoundingClientRect(),s=(o.bottom-o.top)/2,l=t.getClientOffset().y-o.top;r<i&&l<s||r>i&&l>s||(c&&c(r,i,e.zone),e.index=i)}}}}),m=Object(De.a)(f,2),h=m[0].handlerId,x=m[1],v=Object(En.a)({type:"card",item:function(){return Object(l.a)({id:t,index:n,zone:r},o)},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=t.getDropResult();if(n)switch(n.name){case"cards":p(e,"cards");break;case"my-cards":p(e,"my-cards")}}}),g=Object(De.a)(v,2),y=g[0].isDragging,k=g[1],w=y?.4:1;return k("my-cards"===r?x(d):d),Object(Re.jsx)("span",{ref:d,style:{opacity:w,padding:3},"data-handler-id":h,children:Object(Re.jsx)(pn.a,{width:45,src:o.img})})},Tn=n(402),Vn=n(129),Nn=n(130),Dn=(n(388),function(){var e=Object(Xe.g)(),t=Object(Xe.i)(),n=Object(i.c)((function(e){return e.cards})),c=n.cardsByEdition,r=n.selectMyCards,o=Object(i.c)((function(e){return e.description})),s=o.types,l=o.editions,d=Object(i.c)((function(e){return e.decks})),u=d.deckUpdating,j=d.decks,b=Object(a.useState)("all"),O=Object(De.a)(b,2),p=O[0],f=O[1],m=Object(a.useState)([]),h=Object(De.a)(m,2),x=h[0],v=h[1],g=Object(i.b)();Object(a.useEffect)((function(){function e(){return(e=Object(He.a)(Ge.a.mark((function e(){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Zt());case 2:return e.next=4,g(Yt(t.id));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.id&&"undefined"!==t.id&&(0===j.length?function(){e.apply(this,arguments)}():g(Yt(t.id)))}),[t.id,g,j.length]),Object(a.useEffect)((function(){if(u){var e=[{name:"name",value:u.name}];v(e)}}),[u]);Object(a.useEffect)((function(){(null===u||void 0===u?void 0:u.cards)&&g(ot(null===u||void 0===u?void 0:u.cards))}),[g,null===u||void 0===u?void 0:u.cards]);var y=Object(a.useCallback)((function(e,t,n){if("cards"!==n){var a=r[e],c=Cn()(r,{$splice:[[e,1],[t,0,a]]});g(ot(c))}}),[r,g]),k=function(e){return"cards"!==e?r.map((function(t,n){return Object(Re.jsx)(Sn,{id:t.id,index:n,moveCard:function(e,t,n){return y(e,t,n)},zone:e,card:t},n)})):"all"!==p?c.filter((function(e){return e.type===p})).map((function(t,n){return Object(Re.jsx)(Sn,{id:t.id,index:n,moveCard:function(e,t,n){return y(e,t,n)},zone:e,card:t},n)})):void 0},w=function(e){var t=s.find((function(t){return t.id===e}));return null===t||void 0===t?void 0:t.name},C=window.innerWidth<600,I=function(t){g(st()),e.push("/decks")};return Object(Re.jsxs)(Re.Fragment,{children:[Object(Re.jsx)(Ot.a,{children:Object(Re.jsx)(pt.a,{span:24,children:r.length>0?Object(Re.jsx)(At.a,{title:"Si vuelve al listado perder\xe1 todos los datos no guardados. \xbfVolver al listado?",okText:"S\xed",placement:"right",onConfirm:I,onCancel:function(e){},cancelText:"No",children:Object(Re.jsx)(rn.a,{className:"actions",title:"Volver al listado",children:Object(Re.jsx)(xt.a,{type:"primary",shape:"circle",icon:Object(Re.jsx)(fn.a,{})})})}):Object(Re.jsx)(rn.a,{className:"actions",title:"Volver al listado",children:Object(Re.jsx)(xt.a,{onClick:I,type:"primary",shape:"circle",icon:Object(Re.jsx)(fn.a,{})})})})}),Object(Re.jsx)(Ot.a,{gutter:[16,16],style:{paddingTop:10},children:Object(Re.jsx)(pt.a,{span:24,children:Object(Re.jsx)(jn.a,{placeholder:"Seleccione una edici\xf3n",style:{width:"100%"},onChange:function(e){g(function(e){return function(){var t=Object(He.a)(Ge.a.mark((function t(n){var a,c,r;return Ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=localStorage.getItem("token"),t.next=4,Ke("api/card/"+e+"/edition",{},"GET",a);case 4:return c=t.sent,t.next=7,c.json();case 7:r=t.sent,200===c.status?n(it(r)):Ye.b.error("Error al obtener cartas"),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0),Ye.b.error("Error al obtener cartas!");case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(e))},children:l.length>0&&l.map((function(e){return Object(Re.jsx)(jn.a.Option,{value:e.id,children:e.name},e.id)}))})})}),Object(Re.jsx)(Ot.a,{gutter:[16,16],style:{paddingTop:10},children:Object(Re.jsx)(pt.a,{span:24,children:Object(Re.jsxs)(jn.a,{placeholder:"Seleccione un tipo",style:{width:"100%"},onChange:function(e){f(e)},children:[Object(Re.jsx)(jn.a.Option,{value:"all",children:"Todos"},"0"),s.length>0&&s.map((function(e){return Object(Re.jsx)(jn.a.Option,{value:e.id,children:e.name},e.id)}))]})})}),Object(Re.jsx)(Ot.a,{gutter:[16,16],style:{paddingTop:10},children:Object(Re.jsx)(pt.a,{span:24,children:Object(Re.jsx)(Xt.a,{message:"Arrastra las cartas de izquierda a derecha para agregarlas a tu mazo",type:"info",showIcon:!0})})}),Object(Re.jsx)(Ot.a,{style:{paddingTop:10},children:Object(Re.jsxs)(Tn.a,{backend:C?Nn.a:Vn.a,children:[Object(Re.jsxs)(pt.a,{className:"container-deck",span:14,children:[Object(Re.jsx)(Ut.a,{color:"gold",children:"Total: ".concat(c.length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Aliados: ".concat(c.filter((function(e){return"Aliado"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Armas: ".concat(c.filter((function(e){return"Arma"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Oros: ".concat(c.filter((function(e){return"Oro"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Talismanes: ".concat(c.filter((function(e){return"Talism\xe1n"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"T\xf3tems: ".concat(c.filter((function(e){return"T\xf3tem"===w(e.type)})).length)}),Object(Re.jsx)(dn.a,{}),Object(Re.jsx)(zn,{title:"cards",children:c&&k("cards")})]}),Object(Re.jsxs)(pt.a,{className:"container-deck",offset:1,span:9,children:[Object(Re.jsx)(Ot.a,{style:{paddingTop:10},children:Object(Re.jsx)(pt.a,{span:24,children:Object(Re.jsxs)(mt.a,{layout:"inline",autoComplete:"off",onFinish:function(e){if(r.length<50)Ye.b.warning("El mazo debe tener 50 cartas");else{var t,n={name:e.name,cards:r.map((function(e){return e.id}))};g(u?function(e,t){return function(){var n=Object(He.a)(Ge.a.mark((function n(a){var c,r,i;return Ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c=localStorage.getItem("token"),n.next=4,Ke("api/deck/"+e,t,"PUT",c);case 4:return r=n.sent,n.next=7,r.json();case 7:i=n.sent,200===r.status?(a(nn(i)),Ye.b.success('Mazo "'.concat(i.name,'" actualizado correctamente'))):(console.log(r),Ye.b.error("Error al actualizar mazo")),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0),Ye.b.error("Error al actualizar mazo!");case 15:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(u.id,n):(t=n,function(){var e=Object(He.a)(Ge.a.mark((function e(n){var a,c,r;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),e.next=4,Ke("api/deck",t,"POST",a);case 4:return c=e.sent,e.next=7,c.json();case 7:r=e.sent,201===c.status?(n(tn(r)),Ye.b.success('Mazo "'.concat(r.name,'" creado correctamente'))):(console.log(c),Ye.b.error("Error al crear mazo")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),Ye.b.error("Error al crear mazo!");case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()))}},fields:x,children:[Object(Re.jsx)(mt.a.Item,{name:"name",rules:[{required:!0,message:"Por favor ingrese el nombre del mazo"}],children:Object(Re.jsx)(ht.a,{placeholder:"Ingrese nombre del Mazo"})}),Object(Re.jsx)(mt.a.Item,{children:Object(Re.jsx)(xt.a,{htmlType:"submit",type:"primary",children:t.id?"Actualizar":"Guardar"})})]})})}),Object(Re.jsx)(Ot.a,{style:{paddingTop:10},children:Object(Re.jsxs)(pt.a,{span:24,children:[Object(Re.jsx)(Ut.a,{color:"gold",children:"Total: ".concat(r.length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Aliados: ".concat(r.filter((function(e){return"Aliado"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Armas: ".concat(r.filter((function(e){return"Arma"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Oros: ".concat(r.filter((function(e){return"Oro"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"Talismanes: ".concat(r.filter((function(e){return"Talism\xe1n"===w(e.type)})).length)}),Object(Re.jsx)(Ut.a,{color:"green",children:"T\xf3tems: ".concat(r.filter((function(e){return"T\xf3tem"===w(e.type)})).length)}),Object(Re.jsx)(dn.a,{}),Object(Re.jsx)(zn,{title:"my-cards",children:r&&k("my-cards")})]})})]})]})})]})}),Rn=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:p,payload:{match:e,emmitChange:t}}},An=function(e){return{type:f,payload:e}},Mn=function(e){return{type:v,payload:e}},_n=function(e){return{type:g,payload:e}},Pn=function(e){return{type:y,payload:e}},qn=function(e){return{type:w,payload:e}},Bn=n(403),Fn=n(424),Un=n(422),Xn="Defensa",Ln="Ataque",Gn="Cementerio",Hn="Destierro",Wn="Remoci\xf3n",Kn="Apoyo",Jn="Mano",Zn="Castillo",Yn="Oros pagados",$n="Oros sin pagar",Qn="Auxiliar",ea=function(){return{type:Q}},ta=function(){return{type:re}},na=function(){return{type:ke}},aa=function(){return{type:Ce}},ca=function(e,t){for(var n,a=Object(l.a)({},e),c=e[t],r=c.length;0!==r;){n=Math.floor(Math.random()*r),r--;var i=[c[n],c[r]];c[r]=i[0],c[n]=i[1]}return a[t]=c,a},ra=function(e,t,n,a){var c=Object(l.a)({},t),r=c[n].length<e?c[n].length:e,i=c[n].slice(-r);return c[n]=c[n].filter((function(e,t){return t<c[n].length-r})),c[a]=[].concat(Object(O.a)(c[a]),Object(O.a)(i)),c},ia=Zn,oa=Xn,sa=Ln,la=Gn,da=Hn,ua=Wn,ja=Kn,ba=Jn,Oa=Yn,pa=$n,fa=Qn,ma=function(e){var t=e.id,n=e.index,c=e.moveCard,r=e.zone,o=e.card,s=e.isOpponent,d=Object(a.useRef)(null),u=Object(i.b)(),j=Object(a.useContext)(Be).socket,b=Object(i.c)((function(e){return e.match})),p=b.match,f=b.matchId,m=b.opponentId,h=b.opponentMatch,x=Object(i.c)((function(e){return e.auth})).id,v=Object(a.useState)(!1),g=Object(De.a)(v,2),y=g[0],w=g[1],C=Object(a.useState)(!1),I=Object(De.a)(C,2),z=I[0],E=I[1],S=function(e,t){if(e.zone!==t&&!s){var a=p[e.zone].find((function(e,t){return t===n})),c=Object(l.a)({},p),r=Object(l.a)({},h);if(o.user===x){if(console.log("Action:",'Moviendo "'.concat(e.name,'" de "').concat(e.zone,'" a "').concat(t,'"')),a.armsId&&(t===ia||t===la||t===da||t===ua)){var i,d=Object(ln.a)(a.armsId);try{var b=function(){var e=i.value,n=c[ja].find((function(t){return t.idx===e}));n&&(c[ja]=c[ja].filter((function(t){return t.idx!==e})),delete n.bearerId,n.user===x?c[t]=[].concat(Object(O.a)(c[t]),[n]):r[t]=[].concat(Object(O.a)(r[t]),[n]))};for(d.s();!(i=d.n()).done;)b()}catch(T){d.e(T)}finally{d.f()}delete a.armsId}if(a.bearerId&&(t===ia||t===la||t===da||t===ua)){var m=c[oa].find((function(e){return e.idx===a.bearerId}));if(m)c[oa]=c[oa].map((function(e){var t;return e.idx===m.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e}));else{var v=c[sa].find((function(e){return e.idx===a.bearerId}));v&&(c[sa]=c[sa].map((function(e){var t;return e.idx===v.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e})))}delete a.bearerId}if(c[e.zone]=c[e.zone].filter((function(e,t){return t!==n})),c[t]=[].concat(Object(O.a)(c[t]),[a]),t===ia){var g=ca(Object(l.a)({},c),ia);u(Rn(g));var y=ca(Object(l.a)({},r),ia);u(An(y)),null===j||void 0===j||j.emit("update-match-opponent",{match:y,matchId:f})}else u(Rn(c)),u(An(r)),null===j||void 0===j||j.emit("update-match-opponent",{match:r,matchId:f})}else{if(a.armsId&&(t===ia||t===la||t===da||t===ua)){var k,w=Object(ln.a)(a.armsId);try{var C=function(){var e=k.value,n=c[ja].find((function(t){return t.idx===e}));n&&(c[ja]=c[ja].filter((function(t){return t.idx!==e})),delete n.bearerId,n.user===x?c[t]=[].concat(Object(O.a)(c[t]),[n]):r[t]=[].concat(Object(O.a)(r[t]),[n]))};for(w.s();!(k=w.n()).done;)C()}catch(T){w.e(T)}finally{w.f()}delete a.armsId}if(a.bearerId&&(t===ia||t===la||t===da||t===ua)){var I=c[oa].find((function(e){return e.idx===a.bearerId}));if(I)c[oa]=c[oa].map((function(e){var t;return e.idx===I.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e}));else{var z=c[sa].find((function(e){return e.idx===a.bearerId}));z&&(c[sa]=c[sa].map((function(e){var t;return e.idx===z.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e})))}delete a.bearerId}if(c[e.zone]=c[e.zone].filter((function(e,t){return t!==n})),t===ia||t===la||t===da||t===ua?(console.log("Action:",'Moviendo "'.concat(e.name,'" de "').concat(e.zone,'" a "').concat(t,'" oponente')),r[t]=[].concat(Object(O.a)(r[t]),[a])):(console.log("Action:",'Moviendo "'.concat(e.name,'" de "').concat(e.zone,'" a "').concat(t,'"')),c[t]=[].concat(Object(O.a)(c[t]),[a])),t===ia){var E=ca(Object(l.a)({},c),ia);u(Rn(E));var S=ca(Object(l.a)({},r),ia);u(An(S)),null===j||void 0===j||j.emit("update-match-opponent",{match:S,matchId:f})}else u(Rn(c)),u(An(r)),null===j||void 0===j||j.emit("update-match-opponent",{match:r,matchId:f})}}},T=Object(In.a)({accept:"card",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(d.current){var r=e.index,i=n;if(r!==i){var o=null===(a=d.current)||void 0===a?void 0:a.getBoundingClientRect(),s=(o.bottom-o.top)/2,l=t.getClientOffset().y-o.top;r<i&&l<s||r>i&&l>s||(c&&c(r,i,e.zone),e.index=i)}}}}),V=Object(De.a)(T,2),N=V[0].handlerId,D=V[1],R=Object(En.a)({type:"card",item:function(){return Object(l.a)({id:t,index:n,zone:r},o)},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=t.getDropResult();if(n)switch(n.name){case oa:S(e,oa);break;case sa:S(e,sa);break;case la:S(e,la);break;case da:S(e,da);break;case ba:S(e,ba);break;case ua:S(e,ua);break;case ja:S(e,ja);break;case ia:S(e,ia);break;case Oa:S(e,Oa);break;case pa:S(e,pa);break;case fa:S(e,fa)}}}),A=Object(De.a)(R,2),M=A[0].isDragging?.4:1;(0,A[1])(D(d));var _=function(e){if(!p[ia].length)return Ye.b.warning("No hay cartas en ".concat(ia)),void G(!1);console.log("Action:","Obteniendo mano");var t=ra(e,p,ia,ba);u(Rn(t)),G(!1)},P=function(e){u(function(e,t){return{type:k,payload:{index:e,zone:t}}}(n,e)),u({type:ye}),G(!1)},q=function(e){console.log("Action:",'Enviando y barajando "'.concat(o.name,'" de "').concat(e,'" a "').concat(ia,'"'));var t=Object(l.a)(Object(l.a)({},o),{},{zone:e,index:n}),a=p[t.zone].find((function(e,t){return t===n})),c=Object(l.a)({},p),r=Object(l.a)({},h);if(a.user===x){if(a.armsId){var i,s=Object(ln.a)(a.armsId);try{var d=function(){var e=i.value,t=c[ja].find((function(t){return t.idx===e}));t&&(c[ja]=c[ja].filter((function(t){return t.idx!==e})),delete t.bearerId,t.user===x?c[ia]=[].concat(Object(O.a)(c[ia]),[t]):r[ia]=[].concat(Object(O.a)(r[ia]),[t]))};for(s.s();!(i=s.n()).done;)d()}catch(S){s.e(S)}finally{s.f()}delete a.armsId}if(a.bearerId){var b=c[oa].find((function(e){return e.idx===a.bearerId}));if(b)c[oa]=c[oa].map((function(e){var t;return e.idx===b.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e}));else{var m=c[sa].find((function(e){return e.idx===a.bearerId}));m&&(c[sa]=c[sa].map((function(e){var t;return e.idx===m.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e})))}delete a.bearerId}c[t.zone]=c[t.zone].filter((function(e,t){return t!==n})),c[ia]=[].concat(Object(O.a)(c[ia]),[a]);var v=ca(Object(l.a)({},c),ia);u(Rn(v));var g=ca(Object(l.a)({},r),ia);u(An(g)),null===j||void 0===j||j.emit("update-match-opponent",{match:g,matchId:f})}else{if(a.armsId){var y,k=Object(ln.a)(a.armsId);try{var w=function(){var e=y.value,t=c[ja].find((function(t){return t.idx===e}));t&&(c[ja]=c[ja].filter((function(t){return t.idx!==e})),delete t.bearerId,t.user===x?c[ia]=[].concat(Object(O.a)(c[ia]),[t]):r[ia]=[].concat(Object(O.a)(r[ia]),[t]))};for(k.s();!(y=k.n()).done;)w()}catch(S){k.e(S)}finally{k.f()}delete a.armsId}if(a.bearerId){var C=c[oa].find((function(e){return e.idx===a.bearerId}));if(C)c[oa]=c[oa].map((function(e){var t;return e.idx===C.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e}));else{var I=c[sa].find((function(e){return e.idx===a.bearerId}));I&&(c[sa]=c[sa].map((function(e){var t;return e.idx===I.idx?Object(l.a)(Object(l.a)({},e),{},{armsId:null===(t=e.armsId)||void 0===t?void 0:t.filter((function(e){return e!==a.idx}))}):e})))}delete a.bearerId}c[t.zone]=c[t.zone].filter((function(e,t){return t!==n})),r[ia]=[].concat(Object(O.a)(r[ia]),[a]);var z=ca(Object(l.a)({},c),ia);u(Rn(z));var E=ca(Object(l.a)({},r),ia);u(An(E)),null===j||void 0===j||j.emit("update-match-opponent",{match:E,matchId:f})}G(!1)},B=Object(Re.jsxs)("div",{children:[r===ia&&!s&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return _(1)},children:"Robar carta"}),Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return _(8)},children:"Robar mano"}),Object(Re.jsx)("br",{}),Object(Re.jsxs)(xt.a,{type:"link",onClick:function(){return U()},children:["Ver ",r]}),Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return L()},children:"Ver X"}),Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return X()},children:"Botar carta"})," ",Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return F()},children:"Botar X"})," ",Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){console.log("Action:","Barajando Castillo"),E(!0);var e=ca(p,ia);u(Rn(e)),G(!1),setTimeout((function(){E(!1)}),500)},children:"Barajar"})," ",Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){console.log("Action:","Mostrando Castillo al oponente"),null===j||void 0===j||j.emit("show-clastle-to-opponent",{matchId:f}),G(!1)},children:"Mostrar al oponente"})]}),r===la&&!s&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){u({type:se}),G(!1)},children:"Ver Cementerio"})," ",Object(Re.jsx)("br",{})]}),r===da&&!s&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){u({type:de}),G(!1)},children:"Ver Destierro"})," ",Object(Re.jsx)("br",{})]}),r===ua&&!s&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){u({type:je}),G(!1)},children:"Ver Remoci\xf3n"})," ",Object(Re.jsx)("br",{})]}),r===oa&&(!s||p[r].find((function(e){return e.user===m})))&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return q(oa)},children:"Barajar en el Castillo"})," ",Object(Re.jsx)("br",{}),o.armsId&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return J(!0)},children:"Conocer Armas"})]}),r===sa&&(!s||p[r].find((function(e){return e.user===m})))&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return q(sa)},children:"Barajar en el Castillo"})," ",Object(Re.jsx)("br",{}),o.armsId&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return J(!0)},children:"Conocer armas"})]}),r===ja&&(!s||p[r].find((function(e){return e.user===m})))&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){!p||p[oa].length||p[sa].length||!h||h[oa].length||h[sa].length?(u(qn({index:n,idx:o.idx})),u({type:we})):Ye.b.warn("Deben existir aliados en la l\xednea de ".concat(oa," o ").concat(sa," para asignarle una Arma")),G(!1)},children:"Asignar Portador"})," ",Object(Re.jsx)("br",{}),o.bearerId&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return W(!0)},children:"Conocer Portador"})," ",Object(Re.jsx)("br",{})]}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return q(ja)},children:"Barajar el Castillo"})]}),r===Oa&&(!s||p[r].find((function(e){return e.user===m})))&&Object(Re.jsx)("div",{children:Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return q(ja)},children:"Barajar el Castillo"})}),r===pa&&(!s||p[r].find((function(e){return e.user===m})))&&Object(Re.jsx)("div",{children:Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return q(pa)},children:"Barajar el Castillo"})}),r===oa&&(h[oa].find((function(e,t){return e.user===x}))||h[oa].find((function(e,t){return e.user===m})))&&h[oa].find((function(e,t){return t===n&&e.id===o.id}))&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return P(oa)},children:"Tomar control de Aliado"}),Object(Re.jsx)("br",{}),o.armsId&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return J(!1)},children:"Conocer armas"})]}),r===sa&&(h[sa].find((function(e,t){return e.user===x}))||h[sa].find((function(e,t){return e.user===m})))&&h[sa].find((function(e,t){return t===n&&e.id===o.id}))&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return P(sa)},children:"Tomar control de Aliado"}),Object(Re.jsx)("br",{}),o.armsId&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return J(!1)},children:"Conocer armas"})]}),r===ja&&(h[ja].find((function(e,t){return e.user===x}))||h[ja].find((function(e,t){return e.user===m})))&&h[ja].find((function(e,t){return t===n&&e.id===o.id}))&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return P(ja)},children:"Tomar control de Arma"}),Object(Re.jsx)("br",{}),o.bearerId&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return W(!1)},children:"Conocer Portador"})]}),r===Oa&&(h[Oa].find((function(e,t){return e.user===x}))||h[Oa].find((function(e,t){return e.user===m})))&&h[Oa].find((function(e,t){return t===n&&e.id===o.id}))&&Object(Re.jsx)("div",{children:Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return P(Oa)},children:"Tomar control de Oro"})}),r===pa&&(h[pa].find((function(e,t){return e.user===x}))||h[pa].find((function(e,t){return e.user===m})))&&h[pa].find((function(e,t){return t===n&&e.id===o.id}))&&Object(Re.jsx)("div",{children:Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return P(pa)},children:"Tomar control de Oro"})}),r===la&&s&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){u({type:Oe}),G(!1)},children:"Ver Cementerio"})," ",Object(Re.jsx)("br",{})]}),r===da&&s&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){u({type:fe}),G(!1)},children:"Ver Destierro"})," ",Object(Re.jsx)("br",{})]}),r===ua&&s&&Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){u({type:he}),G(!1)},children:"Ver Remoci\xf3n"})," ",Object(Re.jsx)("br",{})]})]}),F=function(){G(!1),u({type:$})},U=function(){G(!1),u({type:ee})},X=function(){console.log("Action:","Botando carta del ".concat(ia," al ").concat(la));var e=ra(1,p,ia,la);u(Rn(e))},L=function(){G(!1),u({type:ce})},G=function(e){e||w(e)},H=function(e,t){if(e){var n=Object(l.a)({},p);n[oa]=n[oa].map((function(e,n){return o.bearerId===e.idx?t?Object(l.a)(Object(l.a)({},e),{},{vibrate:t}):(delete e.vibrate,e):e})),n[sa]=n[sa].map((function(e,n){return o.bearerId===e.idx?t?Object(l.a)(Object(l.a)({},e),{},{vibrate:t}):(delete e.vibrate,e):e})),u(Rn(n,!1))}else{var a=Object(l.a)({},h);a[oa]=a[oa].map((function(e,n){return o.bearerId===e.idx?t?Object(l.a)(Object(l.a)({},e),{},{vibrate:t}):(delete e.vibrate,e):e})),a[sa]=a[sa].map((function(e,n){return o.bearerId===e.idx?t?Object(l.a)(Object(l.a)({},e),{},{vibrate:t}):(delete e.vibrate,e):e})),u(An(a))}},W=function(e){H(e,!0),setTimeout((function(){H(e,!1)}),500),G(!1)},K=function(e,t){if(e){var n=Object(l.a)({},p);n[ja]=n[ja].map((function(e,n){var a;return(null===(a=o.armsId)||void 0===a?void 0:a.includes(e.idx))?t?Object(l.a)(Object(l.a)({},e),{},{vibrate:t}):(delete e.vibrate,e):e})),u(Rn(n,!1))}else{var a=Object(l.a)({},h);a[ja]=a[ja].map((function(e,n){var a;return(null===(a=o.armsId)||void 0===a?void 0:a.includes(e.idx))?t?Object(l.a)(Object(l.a)({},e),{},{vibrate:t}):(delete e.vibrate,e):e})),u(An(a))}},J=function(e){K(e,!0),setTimeout((function(){K(e,!1)}),500),G(!1)};return Object(Re.jsx)(Re.Fragment,{children:r===ia&&!s||r===la||r===da||r===ua||r===oa||r===sa||r===ja||r===Oa||r===pa||r===fa?Object(Re.jsx)(Bn.a,{placement:"right",trigger:"click",content:B,visible:y,onVisibleChange:G,children:Object(Re.jsx)("div",{ref:d,style:{opacity:M,borderRadius:2},className:"".concat(z?"animate__animated animate__shakeY":o.vibrate?"animate__animated animate__flash":void 0," movable-item"),"data-handler-id":N,onContextMenu:function(e){e.preventDefault(),w(!0)},children:r===ia||r===ba&&s?Object(Re.jsx)("img",{width:33,height:50,alt:o.name,src:"https://res.cloudinary.com/dfcm5wuuf/image/upload/v1635185102/reverso-carta_avpq6q.png",className:s?"img-180-deg":""}):Object(Re.jsxs)(Re.Fragment,{children:[o.armsId&&o.armsId.length>0&&Object(Re.jsx)(Un.a,{className:"icon-arm",height:10,width:10}),o.bearerId&&Object(Re.jsx)(vt.a,{className:"icon-arm",height:10,width:10}),Object(Re.jsx)(pn.a,{width:33,height:50,src:o.img,className:s?"img-180-deg":""})]})})}):Object(Re.jsx)("div",{ref:d,style:{opacity:M,borderRadius:2},className:z?"animate__animated animate__shakeY movable-item":"movable-item","data-handler-id":N,children:r===ia||r===ba&&s?Object(Re.jsx)("img",{width:33,height:50,alt:o.name,src:"https://res.cloudinary.com/dfcm5wuuf/image/upload/v1635185102/reverso-carta_avpq6q.png",className:s?"img-180-deg":""}):Object(Re.jsx)(pn.a,{width:33,height:50,src:o.img,className:s?"img-180-deg":""})})})},ha=n(265),xa=n(264),va=n(423),ga=Zn,ya=Xn,ka=Ln,wa=Jn,Ca=Yn,Ia=$n,za=function(e){var t=e.children,n=e.className,c=e.title,r=e.isOpponent,o=Object(a.useState)(!1),s=Object(De.a)(o,2),d=s[0],u=s[1],j=Object(i.c)((function(e){return e.match})),b=j.match,p=j.matchId,f=Object(a.useContext)(Be).socket,m=Object(i.b)(),h=Object(In.a)({accept:"card",drop:function(){return{name:c.split(":")[0]}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}},canDrop:function(e){return!r}}),x=Object(De.a)(h,2),v=x[0],g=v.isOver,y=v.canDrop,k=x[1],w=function(e,t){var n=Object(l.a)({},b);if(!n[e].length)return Ye.b.warn("No hay cartas en la zona de ".concat(e)),void u(!1);n[t]=[].concat(Object(O.a)(n[t]),Object(O.a)(n[e])),n[e]=[],m(Rn(n)),u(!1)},C=Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){if(!b[wa].length)return Ye.b.warn("No hay cartas en la ".concat(wa)),void u(!1);null===f||void 0===f||f.emit("show-hand-to-opponent",{matchId:p}),u(!1)},children:"Mostrar mano"}),Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return w(wa,ga)},children:"Devolver mano"})]});return Object(Re.jsx)(Re.Fragment,{children:Object(Re.jsxs)("div",{ref:k,className:"zone ".concat(g&&y?"animate__animated animate__pulse":""),style:{backgroundColor:g?y?"rgb(51, 0, 0)":"rgb(255, 0, 0)":""},children:[Object(Re.jsxs)("div",{className:r?"title-zone-opponent":"title-zone",children:[Object(Re.jsx)("span",{children:c}),!r&&c.split(":")[0]===Ia&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return w(Ia,Ca)},icon:Object(Re.jsx)(ha.a,{}),size:"small",style:{color:"white",height:15,width:15,float:"right"}}),!r&&c.split(":")[0]===Ca&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return w(Ca,Ia)},icon:Object(Re.jsx)(xa.a,{}),size:"small",style:{color:"white",height:15,width:15,float:"right"}}),!r&&c===ka&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return w(ka,ya)},icon:Object(Re.jsx)(ha.a,{}),size:"small",style:{color:"white",height:15,width:15,float:"right"}}),!r&&c===ya&&Object(Re.jsx)(xt.a,{type:"link",onClick:function(){return w(ya,ka)},icon:Object(Re.jsx)(xa.a,{}),size:"small",style:{color:"white",height:15,width:15,float:"right"}}),!r&&c===wa&&Object(Re.jsx)(Bn.a,{placement:"right",trigger:"click",content:C,visible:d,onVisibleChange:function(e){u(e)},children:Object(Re.jsx)(xt.a,{type:"link",icon:Object(Re.jsx)(va.a,{}),size:"small",style:{color:"white",height:15,width:15,float:"right"}})})]}),Object(Re.jsx)("div",{className:n,children:t})]})})},Ea=(n(389),Zn),Sa=Gn,Ta=function(){var e=Object(i.c)((function(e){return e.match})).match,t=Object(i.c)((function(e){return e.uiModal})).modalOpenThrowXcards,n=Object(a.useState)(1),c=Object(De.a)(n,2),r=c[0],o=c[1],s=Object(i.b)();return Object(Re.jsxs)(Ft.a,{centered:!0,title:"Botar Cartas",visible:t,onOk:function(){console.log("Action:","Botando ".concat(r," carta(s) del ").concat(Ea," a ").concat(Sa));var t=ra(r,e,Ea,Sa);s(Rn(t)),s(ea())},onCancel:function(){s(ea())},children:[Object(Re.jsxs)("p",{children:["Indique la cantidad de cartas que desea botar desde el ",Ea," al ",Sa]}),Object(Re.jsx)(un.a,{min:1,max:e[Ea].length,defaultValue:1,onChange:function(e){o(e)}})]})},Va=function(e){var t=e.children,n=e.title,a=Object(In.a)({accept:"card",drop:function(){return{name:n}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}},canDrop:function(e){return!0}}),c=Object(De.a)(a,2),r=c[0],i=r.isOver,o=r.canDrop,s=c[1];return Object(Re.jsx)("div",{ref:s,style:{backgroundColor:i?o?"rgb(46,44,44)":"rgb(0,0,0)":""},className:"view-moda-origin ".concat(i&&o?"animate__animated animate__pulse":""),children:t})},Na=Zn,Da=Xn,Ra=Ln,Aa=Jn,Ma=$n,_a=Yn,Pa=Qn,qa=function(e){var t=e.id,n=e.index,c=e.moveCard,r=e.zone,o=e.card,s=e.isOrigin,d=e.onlyRead,u=Object(i.b)(),j=Object(a.useRef)(null),b=Object(i.c)((function(e){return e.match})),p=b.viewCardsOrigin,f=b.viewCardsDestiny,m=function(e,t){if(e.zone!==t)if(s){var a=p.find((function(e,t){return t===n}));a.isOpponent=!0;var c=p.filter((function(e,t){return t!==n})),r=[].concat(Object(O.a)(f),[a]);u(Mn(c)),u(_n(r))}else{var i=f.find((function(e,t){return t===n})),o=f.filter((function(e,t){return t!==n})),l=[].concat(Object(O.a)(p),[i]);u(Mn(l)),u(_n(o))}},h=Object(In.a)({accept:"card",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(j.current){var r=e.index,i=n;if(r!==i){var o=null===(a=j.current)||void 0===a?void 0:a.getBoundingClientRect(),l=(o.bottom-o.top)/2,d=t.getClientOffset().y-o.top;r<i&&d<l||r>i&&d>l||(c&&c(r,i,e.zone,s),e.index=i)}}}}),x=Object(De.a)(h,2),v=x[0].handlerId,g=x[1],y=Object(En.a)({type:"card",item:function(){return Object(l.a)({id:t,index:n,zone:r},o)},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){var n=t.getDropResult();if(n)switch(n.name){case Na:m(e,Na);break;case Aa:m(e,Aa);break;case Da:m(e,Da);break;case Ra:m(e,Ra);break;case _a:m(e,_a);break;case Ma:m(e,Ma);break;case Pa:m(e,Pa)}}}),k=Object(De.a)(y,2),w=k[0].isDragging,C=k[1],I=w?.4:1;return d||C(g(j)),Object(Re.jsx)("span",{ref:j,style:{opacity:I,padding:3},"data-handler-id":v,children:Object(Re.jsx)(pn.a,{width:45,src:o.img})})},Ba=Xn,Fa=Ln,Ua=Jn,Xa=$n,La=Yn,Ga=Qn,Ha=function(e){var t=e.origin,n=e.zone,c=e.amount,r=e.onlyRead,o=(e.isOpponent,Object(i.c)((function(e){return e.match}))),s=o.viewCardsOrigin,d=o.viewCardsDestiny,u=Object(i.b)();Object(a.useEffect)((function(){u(Mn(c?t[n].slice(-c):t[n])),u(_n([]))}),[u,t,n,c]);var j,b,p=Object(i.c)((function(e){return e.uiModal})),f=p.modalOpenViewCastle,m=p.modalOpenViewXcards,h=p.modalOpenViewCastleToOpponent,x=p.modalOpenViewCementery,v=p.modalOpenViewExile,g=p.modalOpenViewRemoval,y=p.modalOpenViewCementeryOpponent,k=p.modalOpenViewExileOpponent,w=p.modalOpenViewRemovalOpponent,C=p.modalOpenViewHandOpponent,I=Object(a.useState)(""),z=Object(De.a)(I,2),E=z[0],S=z[1],T=function(){u({type:te}),u({type:ae}),u({type:oe}),u({type:le}),u({type:ue}),u({type:be}),u({type:pe}),u({type:me}),u({type:xe}),u({type:ge}),u(Pn(1))},V=Object(a.useCallback)((function(e,t,n,a){if((!a||s[e])&&(a||d[e])){var c=a?s[e]:d[e],r=a?s:d;r=Cn()(r,{$splice:[[e,1],[t,0,c]]}),u(a?Mn(r):_n(r))}}),[s,d,u]),N=window.innerWidth<600;return Object(Re.jsxs)(Ft.a,{width:1e3,centered:!0,title:"Viendo ".concat(n,"..."),visible:f||m||h||x||v||g||y||k||w||C,onCancel:function(){T()},onOk:function(){if(r)T();else{var e=Object(l.a)({},t);e[n]=c?[].concat(Object(O.a)(t[n].filter((function(e,a){return a<t[n].length-c}))),Object(O.a)(s)):s,E&&d.length&&(e[E]=[].concat(Object(O.a)(e[E]),Object(O.a)(d))),u(Rn(e)),T()}},children:[Object(Re.jsx)(Xt.a,{style:{marginBottom:20},message:"Las cartas que est\xe1n a la derecha son las primeras en el ".concat(n),type:"info",showIcon:!0}),Object(Re.jsxs)(Tn.a,{backend:N?Nn.a:Vn.a,children:[Object(Re.jsx)(Va,{title:n,children:s&&(j=n,b=!0,s.map((function(e,t){return Object(Re.jsx)(qa,{id:e.id,index:t,moveCard:function(e,t,n,a){return V(e,t,n,a)},zone:j,card:e,isOrigin:b,onlyRead:r},t)})))}),!r&&Object(Re.jsxs)(jn.a,{placeholder:"Mover a",style:{width:"100%",marginTop:20,marginBottom:20},onChange:function(e){S(e)},children:[Object(Re.jsx)(jn.a.Option,{value:Ua,children:Ua},Ua),Object(Re.jsx)(jn.a.Option,{value:Ba,children:Ba},Ba),Object(Re.jsx)(jn.a.Option,{value:Fa,children:Fa},Fa),Object(Re.jsx)(jn.a.Option,{value:La,children:La},La),Object(Re.jsx)(jn.a.Option,{value:Xa,children:Xa},Xa),Object(Re.jsx)(jn.a.Option,{value:Ga,children:Ga},Ga)]}),!r&&""!==E&&Object(Re.jsx)(Va,{title:E,children:d&&function(e,t){return d.map((function(n,a){return Object(Re.jsx)(qa,{id:n.id,index:a,moveCard:function(e,t,n,a){return V(e,t,n,a)},zone:e,card:n,isOrigin:t},a)}))}(E,!1)})]})]})},Wa=Zn,Ka=function(){var e=Object(i.c)((function(e){return e.match})).match,t=Object(i.c)((function(e){return e.uiModal})).modalOpenSelectXcards,n=Object(i.b)();return Object(Re.jsxs)(Ft.a,{centered:!0,title:"Ver Cartas",visible:t,onOk:function(){n(ta()),n({type:ne})},onCancel:function(){n(ta()),n(Pn(1))},children:[Object(Re.jsx)("p",{children:"Indique la cantidad de cartas que desea ver"}),Object(Re.jsx)(un.a,{min:1,max:e[Wa].length,defaultValue:1,onChange:function(e){n(Pn(e))}})]})},Ja=Xn,Za=Ln,Ya=Kn,$a=Jn,Qa=$n,ec=Yn,tc=Hn,nc=function(e){var t=e.zone,n=e.index,c=Object(i.c)((function(e){return e.match})),r=c.match,o=c.opponentMatch,s=(c.opponentId,c.matchId),d=Object(i.c)((function(e){return e.uiModal})).modalOpenTakeControlOpponentCard,u=Object(a.useState)(""),j=Object(De.a)(u,2),b=j[0],p=j[1],f=Object(i.b)(),m=Object(a.useContext)(Be).socket;return Object(Re.jsxs)(Ft.a,{centered:!0,title:"Destino de Carta",visible:d,onOk:function(){var e;if(""!==b){var a=Object(l.a)({},o),c=Object(l.a)({},r),i=a[t].find((function(e,t){return t===n}));if(a[t]=a[t].filter((function(e,t){return t!==n})),c[b]=[].concat(Object(O.a)(c[b]),[i]),null===(e=i.armsId)||void 0===e?void 0:e.length){var d,u=Object(ln.a)(i.armsId);try{var j=function(){var e=d.value,t=a[Ya].find((function(t){return t.idx===e}));a[Ya]=a[Ya].filter((function(t){return t.idx!==e})),c[Ya]=[].concat(Object(O.a)(c[Ya]),[t])};for(u.s();!(d=u.n()).done;)j()}catch(p){u.e(p)}finally{u.f()}}f(Rn(c)),f(An(a)),f(na()),null===m||void 0===m||m.emit("update-match-opponent",{match:a,matchId:s})}else Ye.b.warn("Ninguna zona de destino seleccionada")},onCancel:function(){f(na())},children:[Object(Re.jsx)("p",{children:"Seleccione tu zona donde quieres que se env\xede la carta seleccionada"}),Object(Re.jsxs)(jn.a,{placeholder:"Mover a",style:{width:"100%",marginTop:20,marginBottom:20},onChange:function(e){p(e)},children:[Object(Re.jsx)(jn.a.Option,{value:$a,children:$a},$a),Object(Re.jsx)(jn.a.Option,{value:Ya,children:Ya},Ya),Object(Re.jsx)(jn.a.Option,{value:Ja,children:Ja},Ja),Object(Re.jsx)(jn.a.Option,{value:Za,children:Za},Za),Object(Re.jsx)(jn.a.Option,{value:ec,children:ec},ec),Object(Re.jsx)(jn.a.Option,{value:Qa,children:Qa},Qa),Object(Re.jsx)(jn.a.Option,{value:tc,children:tc},tc)]})]})},ac=n(199),cc=Xn,rc=Ln,ic=Kn,oc=ft.a.Title,sc=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.uiModal})).modalOpenAssignWeapon,n=Object(i.c)((function(e){return e.match})),c=n.match,r=n.matchId,o=n.opponentMatch,s=n.opponentId,d=n.selectedWeapon,u=Object(i.c)((function(e){return e.auth})).id,j=Object(a.useContext)(Be).socket,b=Object(a.useState)(u),p=Object(De.a)(b,2),f=p[0],m=p[1],h=Object(a.useState)(""),x=Object(De.a)(h,2),v=x[0],g=x[1];Object(a.useEffect)((function(){c[cc].map((function(e,t){var n;return(null===(n=e.armsId)||void 0===n?void 0:n.includes(d.idx))&&(g("".concat(cc,"_").concat(t,"_").concat(e.idx)),m(u)),e})),c[rc].map((function(e,t){var n;return(null===(n=e.armsId)||void 0===n?void 0:n.includes(d.idx))&&(g("".concat(rc,"_").concat(t,"_").concat(e.idx)),m(u)),e})),o[cc].map((function(e,t){var n;return(null===(n=e.armsId)||void 0===n?void 0:n.includes(d.idx))&&(g("".concat(cc,"_").concat(t,"_").concat(e.idx)),m(s)),e})),o[rc].map((function(e,t){var n;return(null===(n=e.armsId)||void 0===n?void 0:n.includes(d.idx))&&(g("".concat(rc,"_").concat(t,"_").concat(e.idx)),m(s)),e}))}),[c,d,s,u,o]);var y=function(t,n,a,i){var s=Object(l.a)({},c),u=Object(l.a)({},o);if(s[rc]=s[rc].map((function(e){var t;return e.idx!==i&&(null===(t=e.armsId)||void 0===t?void 0:t.includes(d.idx))?Object(l.a)(Object(l.a)({},e),{},{armsId:e.armsId.filter((function(e){return e!==d.idx}))}):e})),s[cc]=s[cc].map((function(e){var t;return e.idx!==i&&(null===(t=e.armsId)||void 0===t?void 0:t.includes(d.idx))?Object(l.a)(Object(l.a)({},e),{},{armsId:e.armsId.filter((function(e){return e!==d.idx}))}):e})),u[rc]=u[rc].map((function(e){var t;return e.idx!==i&&(null===(t=e.armsId)||void 0===t?void 0:t.includes(d.idx))?Object(l.a)(Object(l.a)({},e),{},{armsId:e.armsId.filter((function(e){return e!==d.idx}))}):e})),u[cc]=u[cc].map((function(e){var t;return e.idx!==i&&(null===(t=e.armsId)||void 0===t?void 0:t.includes(d.idx))?Object(l.a)(Object(l.a)({},e),{},{armsId:e.armsId.filter((function(e){return e!==d.idx}))}):e})),t)s[n]=s[n].map((function(e,t){if(Number(a)===t){var n=e.armsId?e.armsId:[];return Object(l.a)(Object(l.a)({},e),{},{armsId:[].concat(Object(O.a)(n),[d.idx])})}return e})),s[ic]=s[ic].map((function(e){return d.idx===e.idx?Object(l.a)(Object(l.a)({},e),{},{bearerId:i}):e}));else{u[n]=u[n].map((function(e,t){if(Number(a)===t){var n=e.armsId?e.armsId:[];return Object(l.a)(Object(l.a)({},e),{},{armsId:[].concat(Object(O.a)(n),[d.idx])})}return e}));var b=s[ic].find((function(e){return e.idx===d.idx}));b.bearerId=i,s[ic]=s[ic].filter((function(e){return e.idx!==d.idx})),u[ic]=[].concat(Object(O.a)(u[ic]),[b])}e(Rn(s)),e(An(u)),null===j||void 0===j||j.emit("update-match-opponent",{match:u,matchId:r})},k=function(e){console.log(e.target.value),g(e.target.value)};return Object(Re.jsxs)(Ft.a,{centered:!0,title:"Seleccionando portador...",visible:t,onOk:function(){if(""!==v){var t=v.split("_"),n=Object(De.a)(t,3),a=n[0],c=n[1],r=n[2];console.log(a,c,r),y(f===u,a,c,r),e(qn(null)),e(aa())}},onCancel:function(){e(qn(null)),e(aa())},width:1e3,children:[Object(Re.jsx)("p",{children:"Seleccione la arena en donde quiere jugar esta Arma"}),Object(Re.jsx)(ac.a.Group,{value:f,onChange:function(e){m(e.target.value)},style:{paddingBottom:20},children:Object(Re.jsxs)(Bt.b,{direction:"vertical",children:[Object(Re.jsx)(ac.a,{value:u,children:"Mi Zona"}),Object(Re.jsx)(ac.a,{value:s,children:"Zona Oponente"})]})}),f===u&&Object(Re.jsxs)("div",{style:{paddingTop:20},children:[c[rc].length>0&&Object(Re.jsxs)("div",{className:"zone-flex",style:{display:"block"},children:[Object(Re.jsx)(oc,{level:4,children:rc}),Object(Re.jsx)(ac.a.Group,{value:v,onChange:k,children:Object(Re.jsx)(Bt.b,{direction:"horizontal",children:c[rc].map((function(e,t){return Object(Re.jsx)(ac.a,{value:rc+"_"+t+"_"+e.idx,children:Object(Re.jsx)(pn.a,{width:33,height:50,src:e.img})},t)}))})})]}),c[cc].length>0&&Object(Re.jsxs)("div",{className:"zone-flex",style:{display:"block"},children:[Object(Re.jsx)(oc,{level:4,children:cc}),Object(Re.jsx)(ac.a.Group,{value:v,onChange:k,children:Object(Re.jsx)(Bt.b,{direction:"horizontal",children:c[cc].map((function(e,t){return Object(Re.jsx)(ac.a,{value:cc+"_"+t+"_"+e.idx,children:Object(Re.jsx)(pn.a,{width:33,height:50,src:e.img})},t)}))})})]})]}),f===s&&Object(Re.jsxs)("div",{style:{paddingTop:20},children:[o[rc].length>0&&Object(Re.jsxs)("div",{className:"zone-flex",style:{display:"block"},children:[Object(Re.jsx)(oc,{level:4,children:rc}),Object(Re.jsx)(ac.a.Group,{value:v,onChange:k,children:Object(Re.jsx)(Bt.b,{direction:"horizontal",children:o[rc].map((function(e,t){return Object(Re.jsx)(ac.a,{value:rc+"_"+t+"_"+e.idx,children:Object(Re.jsx)(pn.a,{width:33,height:50,src:e.img})},t)}))})})]}),o[cc].length>0&&Object(Re.jsxs)("div",{className:"zone-flex",style:{display:"block"},children:[Object(Re.jsx)(oc,{level:4,children:cc}),Object(Re.jsx)(ac.a.Group,{value:v,onChange:k,children:Object(Re.jsx)(Bt.b,{direction:"horizontal",children:o[cc].map((function(e,t){return Object(Re.jsx)(ac.a,{value:cc+"_"+t+"_"+e.idx,children:Object(Re.jsx)(pn.a,{width:33,height:50,src:e.img})},t)}))})})]})]})]})},lc=n(102),dc=n(132),uc=Ft.a.confirm,jc=Zn,bc=Xn,Oc=Ln,pc=Gn,fc=Hn,mc=Wn,hc=Kn,xc=Jn,vc=Yn,gc=$n,yc=Qn,kc=function(){var e=Object(Xe.h)().pathname.replace("/","");Jt(!0,e);var t=Object(i.b)(),n=Object(i.c)((function(e){return e.match})),c=n.match,r=n.emmitChange,o=n.matchId,s=n.opponentMatch,l=n.opponentId,d=n.amountCardsView,u=n.takeControlOpponentCardIndex,j=n.takeControlOpponentCardZone,b=(Object(i.c)((function(e){return e.auth})).id,Object(i.c)((function(e){return e.decks})).deckDefault),O=Object(Xe.g)(),p=Object(a.useState)(!1),f=Object(De.a)(p,2),m=f[0],h=f[1];Object(a.useEffect)((function(){o||O.replace("/play")}),[o,O]);var x=Object(i.c)((function(e){return e.uiModal})),v=x.modalOpenThrowXcards,g=x.modalOpenViewCastle,y=x.modalOpenViewXcards,k=x.modalOpenSelectXcards,w=x.modalOpenViewCastleToOpponent,C=x.modalOpenViewCementery,I=x.modalOpenViewExile,z=x.modalOpenViewRemoval,E=x.modalOpenViewCementeryOpponent,S=x.modalOpenViewExileOpponent,T=x.modalOpenViewRemovalOpponent,V=x.modalOpenViewHandOpponent,N=x.modalOpenTakeControlOpponentCard,D=x.modalOpenAssignWeapon,R=Object(a.useContext)(Be),A=(R.online,R.socket),M=Object(a.useCallback)((function(){uc({title:"Tu oponente solicita abandono mutuo",icon:Object(Re.jsx)(lc.a,{}),content:"Tu oponente te est\xe1 solicitando que abandonen mutuamente la partida. Ambos, no sumar\xe1n victorias ni derrotas. ",okText:"Aprobar",cancelText:"Rechazar",onOk:function(){null===A||void 0===A||A.emit("approve-request-leave-mutual-match",{matchId:o,opponentId:l}),window.location.replace(window.location.origin+"/play")},onCancel:function(){null===A||void 0===A||A.emit("reject-request-leave-mutual-match",{matchId:o,opponentId:l})}})}),[o,l,A]),_=Object(a.useCallback)((function(e){uc({title:e,icon:Object(Re.jsx)(lc.a,{}),cancelButtonProps:{hidden:!0},okButtonProps:{hidden:!0}})}),[]),P=Object(a.useCallback)((function(e){uc({title:e,icon:Object(Re.jsx)(dc.a,{}),content:"Has ganado la partida, felicitaciones!",cancelButtonProps:{hidden:!0},okText:"Aceptar",onOk:function(){window.location.replace(window.location.origin+"/play")}})}),[]),q={};q[jc]=[],q[xc]=[],q[Oc]=[],q[pc]=[],q[fc]=[],q[bc]=[],q[mc]=[],q[hc]=[],q[vc]=[],q[gc]=[];var B=window.innerWidth<600;Object(a.useEffect)((function(){if(null===b||void 0===b?void 0:b.cards.length){console.log("changeMatch");var e={};e[jc]=null===b||void 0===b?void 0:b.cards,e[xc]=[],e[Oc]=[],e[pc]=[],e[fc]=[],e[bc]=[],e[mc]=[],e[hc]=[],e[vc]=[],e[gc]=[],e[yc]=[],t(Rn(e))}}),[t,null===b||void 0===b?void 0:b.cards]),Object(a.useEffect)((function(){c&&r&&o&&(c[jc]&&c[jc].length||c[bc]&&c[bc].length||c[Oc]&&c[Oc].length||c[hc]&&c[hc].length||c[pc]&&c[pc].length||c[fc]&&c[fc].length||c[mc]&&c[mc].length||c[vc]&&c[vc].length||c[gc]&&c[gc].length||c[yc]&&c[yc].length)&&(console.log("changing..."),null===A||void 0===A||A.emit("changing",{match:c,matchId:o}))}),[A,c,o,r]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("changing-opponent",(function(e){t(An(e))}))}),[A,t]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("updating-match-opponent",(function(e){console.log("updating-match-opponent"),t(Rn(e))}))}),[A,t]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("showing-clastle-to-opponent",(function(){t({type:ie})}))}),[A,t]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("showing-hand-to-opponent",(function(){t({type:ve})}))}),[A,t]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("opponent-leave-match",(function(){P("Tu oponente abandon\xf3 la partida")}))}),[A,P,t,O]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("request-opponent-leave-mutual-match",(function(){M()}))}),[A,M]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("finish-approve-leave-mutual-match",(function(){_("Tu oponente aprob\xf3 el abandono mutuo. Saliendo..."),setTimeout((function(){window.location.replace(window.location.origin+"/play")}),2e3)}))}),[A,_]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("finish-reject-leave-mutual-match",(function(){_("Tu oponente rechaz\xf3 el abandono mutuo"),setTimeout((function(){Ft.a.destroyAll()}),2e3)}))}),[A,_]),Object(a.useEffect)((function(){c&&c[jc]&&0===c[jc].length&&(null===A||void 0===A||A.emit("i-missed-match",{opponentId:l,matchId:o}),_("Perdiste :("),setTimeout((function(){window.location.replace(window.location.origin+"/play")}),2e3))}),[c,A]),Object(a.useEffect)((function(){null===A||void 0===A||A.on("you-win-match",(function(){P("Ganaste :)")}))}),[A,_]);var F=Object(a.useCallback)((function(e,t,n){}),[c,t]),U=function(e){return c[e].map((function(t,n){return Object(Re.jsx)(ma,{index:n,moveCard:function(e,t,n){return F(e,t,n)},zone:e,card:t},n)}))},X=function(e){return s[e].map((function(t,n){return Object(Re.jsx)(ma,{isOpponent:!0,index:n,moveCard:function(e,t,n){return F(e,t,n)},zone:e,card:t},n)}))},L=Object(Re.jsxs)("div",{children:[Object(Re.jsx)(xt.a,{type:"link",onClick:function(){uc({title:"\xbfSeguro que quieres abandonar la partida?",icon:Object(Re.jsx)(lc.a,{}),content:"Si abandonas la partida perder\xe1s y tu oponente ser\xe1 el ganador",okText:"S\xed",cancelText:"No",onOk:function(){window.location.replace(window.location.origin+"/play")},onCancel:function(){h(!1)}})},children:"Abandonar"}),Object(Re.jsx)("br",{}),Object(Re.jsx)(xt.a,{type:"link",onClick:function(){null===A||void 0===A||A.emit("request-leave-mutual-match",{matchId:o}),h(!1)},children:"Abandono mutuo"})]});return Object(Re.jsxs)(Re.Fragment,{children:[v&&Object(Re.jsx)(Ta,{}),g&&Object(Re.jsx)(Ha,{origin:c,zone:jc}),k&&Object(Re.jsx)(Ka,{}),y&&Object(Re.jsx)(Ha,{origin:c,zone:jc,amount:d}),w&&Object(Re.jsx)(Ha,{origin:s,zone:jc,onlyRead:!0}),C&&Object(Re.jsx)(Ha,{origin:c,zone:pc}),I&&Object(Re.jsx)(Ha,{origin:c,zone:fc}),z&&Object(Re.jsx)(Ha,{origin:c,zone:mc}),E&&Object(Re.jsx)(Ha,{origin:s,zone:pc,onlyRead:!0}),S&&Object(Re.jsx)(Ha,{origin:s,zone:fc,onlyRead:!0}),T&&Object(Re.jsx)(Ha,{origin:s,zone:mc,onlyRead:!0}),V&&Object(Re.jsx)(Ha,{origin:s,zone:xc,onlyRead:!0}),N&&Object(Re.jsx)(nc,{zone:j,index:u}),D&&Object(Re.jsx)(sc,{}),Object(Re.jsx)("div",{className:"content-match",children:Object(Re.jsx)(Tn.a,{backend:B?Nn.a:Vn.a,children:Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsxs)(pt.a,{span:20,children:[Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:10,children:Object(Re.jsx)(za,{title:vc+": "+(s[vc]?s[vc].length:"0"),className:"zone-flex",isOpponent:!0,children:s[vc]&&X(vc)})}),Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:yc,className:"zone-flex",isOpponent:!0,children:s[yc]&&X(yc)})}),Object(Re.jsx)(pt.a,{span:12,children:Object(Re.jsx)(za,{title:xc,className:"zone-flex",isOpponent:!0,children:s[xc]&&X(xc)})})]}),Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:10,children:Object(Re.jsx)(za,{title:gc+": "+(s[gc]?s[gc].length:"0"),className:"zone-flex ",isOpponent:!0,children:s[gc]&&X(gc)})}),Object(Re.jsx)(pt.a,{span:14,children:Object(Re.jsx)(za,{title:hc,className:"zone-flex",isOpponent:!0,children:s[hc]&&X(hc)})})]}),Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:mc,className:"stack",isOpponent:!0,children:s[mc]&&X(mc)})}),Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:jc+": "+(s[jc]?s[jc].length:"0"),className:"stack",isOpponent:!0,children:s[jc]&&X(jc)})}),Object(Re.jsx)(pt.a,{span:20,children:Object(Re.jsx)(za,{title:bc,className:"zone-flex",isOpponent:!0,children:s[bc]&&X(bc)})})]}),Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:fc,className:"stack",isOpponent:!0,children:s[fc]&&X(fc)})}),Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:pc,className:"stack",isOpponent:!0,children:s[pc]&&X(pc)})}),Object(Re.jsx)(pt.a,{span:20,children:Object(Re.jsx)(za,{title:Oc,className:"zone-flex",isOpponent:!0,children:s[Oc]&&X(Oc)})})]}),Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:fc,className:"stack",children:c[fc]&&U(fc)})}),Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:pc,className:"stack",children:c[pc]&&U(pc)})}),Object(Re.jsx)(pt.a,{span:20,children:Object(Re.jsx)(za,{title:Oc,className:"zone-flex",children:c[Oc]&&U(Oc)})})]}),Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:mc,className:"stack",children:c[mc]&&U(mc)})}),Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:jc+": "+(c[jc]?c[jc].length:"0"),className:"stack",children:c[jc]&&U(jc)})}),Object(Re.jsx)(pt.a,{span:20,children:Object(Re.jsx)(za,{title:bc,className:"zone-flex",children:c[bc]&&U(bc)})})]}),Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:10,children:Object(Re.jsx)(za,{title:gc+": "+(c[gc]?c[gc].length:"0"),className:"zone-flex",children:c[gc]&&U(gc)})}),Object(Re.jsx)(pt.a,{span:14,children:Object(Re.jsx)(za,{title:hc,className:"zone-flex",children:c[hc]&&U(hc)})})]}),Object(Re.jsxs)(Ot.a,{gutter:[8,8],children:[Object(Re.jsx)(pt.a,{span:10,children:Object(Re.jsx)(za,{title:vc+": "+(c[vc]?c[vc].length:"0"),className:"zone-flex",children:c[vc]&&U(vc)})}),Object(Re.jsx)(pt.a,{span:2,children:Object(Re.jsx)(za,{title:yc,className:"stack",children:c[yc]&&U(yc)})}),Object(Re.jsx)(pt.a,{span:12,children:Object(Re.jsx)(za,{title:xc,className:"zone-flex",withPopover:!0,children:c[xc]&&U(xc)})})]})]}),Object(Re.jsx)(pt.a,{span:4,children:Object(Re.jsx)(Ot.a,{gutter:[8,8],children:Object(Re.jsx)(pt.a,{style:{width:"100%",textAlign:"right"},children:Object(Re.jsx)(Bn.a,{placement:"leftTop",trigger:"click",content:L,visible:m,onVisibleChange:function(e){h(e)},children:Object(Re.jsx)(xt.a,{style:{backgroundColor:"black"},icon:Object(Re.jsx)(Fn.a,{})})})})})})]})})})]})},wc=bt.a.Content,Cc=bt.a.Sider,Ic=function(){var e=Object(a.useContext)(Ae),t=e.hiddenMenu,n=e.selectedOption,c=Object(a.useContext)(Be).socket,r=Object(i.c)((function(e){return e.match})),o=(r.matchId,r.opponentId,Object(Xe.h)().pathname.replace("/","")),s=Object(i.b)(),l=Object(Xe.g)(),d=function(){s((function(e){localStorage.removeItem("token"),e(Ze())})),s($t()),s(tt()),s({type:x}),s({type:T})},u=function(){console.log("close notification")},j=Object(a.useCallback)((function(e,t){null===c||void 0===c||c.emit("create-match",{opponentId:t}),Dt.a.close(e)}),[c]),b=Object(a.useCallback)((function(e,t,n){var a=Object(Re.jsx)(xt.a,{type:"primary",size:"small",onClick:function(){j(e,n)},children:"Aceptar"});Dt.a.open({message:"Nueva invitaci\xf3n",description:"El usuario ".concat(t," te est\xe1 invitando a jugar"),btn:a,key:e,onClose:u,duration:10,className:"centered"})}),[j]);return Object(a.useEffect)((function(){null===c||void 0===c||c.on("send-notification",(function(e){b(e.key,e.from,e.id)}))}),[c,b]),Object(a.useEffect)((function(){null===c||void 0===c||c.on("cancele-notification",(function(e){Dt.a.close(e.key)}))}),[c]),Object(a.useEffect)((function(){null===c||void 0===c||c.on("go-match",(function(e){var t;s((t=e.opponentId,{type:h,payload:t})),s(function(e){return{type:m,payload:e}}(e.matchId)),l.replace("/match")}))}),[c,b,s,l]),Object(Re.jsxs)(bt.a,{style:{height:"100vh"},children:[Object(Re.jsxs)(Cc,{hidden:t,collapsedWidth:"0",breakpoint:"md",style:{overflow:"auto",height:"100vh",position:"fixed",left:0},children:[Object(Re.jsx)("div",{className:"logo"}),Object(Re.jsxs)(Rt.a,{className:"menu-myl",theme:"dark",mode:"inline",selectedKeys:[n],children:[Object(Re.jsx)(Rt.a.Item,{icon:Object(Re.jsx)(Mt.a,{}),children:Object(Re.jsx)(Ue.b,{to:"/play",children:"Jugar"})},"play"),Object(Re.jsx)(Rt.a.Item,{icon:Object(Re.jsx)(_t.a,{}),children:Object(Re.jsx)(Ue.b,{to:"/decks",children:"Mis Mazos"})},"decks"),Object(Re.jsx)(Rt.a.Item,{icon:Object(Re.jsx)(Pt.a,{}),children:Object(Re.jsx)(Ue.b,{to:"/cards",children:"Cartas"})},"cards"),Object(Re.jsx)(Rt.a.Item,{icon:Object(Re.jsx)(vt.a,{}),children:Object(Re.jsx)(Ue.b,{to:"/users",children:"Usuarios"})},"users"),Object(Re.jsx)(Rt.a.Item,{className:"btn-logout",icon:Object(Re.jsx)(qt.a,{}),children:Object(Re.jsx)(At.a,{title:"\xbfSalir?",okText:"S\xed",placement:"right",onConfirm:function(){d()},onCancel:function(){},cancelText:"No",children:"Cerrar sesi\xf3n"})},"logout")]})]}),Object(Re.jsx)(bt.a,{className:"site-layout",style:{marginLeft:t?0:200},children:Object(Re.jsx)(wc,{style:{margin:"24px 16px 0",overflow:"initial"},children:Object(Re.jsx)("div",{className:"site-layout-background",style:{padding:"match"===o?0:24},children:Object(Re.jsxs)(Xe.d,{children:[Object(Re.jsx)(Xe.b,{exact:!0,path:"/match",component:kc}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/play",component:cn}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/cards",component:sn}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/cards/new",component:gn}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/cards/:id/edit",component:gn}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/decks",component:kn}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/decks/new",component:Dn}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/decks/:id/edit",component:Dn}),Object(Re.jsx)(Xe.b,{exact:!0,path:"/users",component:yn}),Object(Re.jsx)(Xe.a,{to:"/play"})]})})})})]})},zc=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})),n=t.checking,c=t.logged;return Object(a.useEffect)((function(){e(function(){var e=Object(He.a)(Ge.a.mark((function e(t){var n,a,c;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=localStorage.getItem("token"))||t(Ze()),e.next=5,Ke("api/auth/renew-token",{},"GET",n);case 5:return a=e.sent,e.next=8,a.json();case 8:c=e.sent,200===a.status?(localStorage.setItem("token",c.token),t(Je({id:c.user.id,name:c.user.name,lastname:c.user.lastname,email:c.user.email,username:c.user.username,role:c.user.role,status:c.user.status,online:c.user.online,playing:c.user.playing,defeats:c.user.defeats}))):t(Ze()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(a.useEffect)((function(){c&&(e(function(){var e=Object(He.a)(Ge.a.mark((function e(t){var n,a,c;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),e.next=4,Ke("api/type",{},"GET",n);case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,200===a.status?t(lt(c)):console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(He.a)(Ge.a.mark((function e(t){var n,a,c;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),e.next=4,Ke("api/frecuency",{},"GET",n);case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,200===a.status?t(dt(c)):console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(He.a)(Ge.a.mark((function e(t){var n,a,c;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),e.next=4,Ke("api/race",{},"GET",n);case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,200===a.status?t(ut(c)):console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(He.a)(Ge.a.mark((function e(t){var n,a,c;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("token"),e.next=4,Ke("api/edition",{},"GET",n);case 4:return a=e.sent,e.next=7,a.json();case 7:c=e.sent,200===a.status?t(jt(c)):console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()),e(et()))}),[e,c]),n?Object(Re.jsx)("h1",{children:"Espere..."}):Object(Re.jsx)(Ue.a,{children:Object(Re.jsx)("div",{children:Object(Re.jsxs)(Xe.d,{children:[Object(Re.jsx)(Nt,{isAuthenticated:c,component:zt,path:"/auth"}),Object(Re.jsx)(Tt,{isAuthenticated:c,component:Ic,path:"/"}),Object(Re.jsx)(Xe.a,{to:"/auth/login"})]})})})},Ec=(n(390),function(){var e=Object(i.c)((function(e){return e.spin})),t=e.show,n=e.text;return Object(Re.jsx)(Ne.a,{tip:n,spinning:t,children:Object(Re.jsx)(Fe,{children:Object(Re.jsx)(Me,{children:Object(Re.jsx)(zc,{})})})})});r.a.render(Object(Re.jsx)(i.a,{store:Ve,children:Object(Re.jsx)(Ec,{})}),document.getElementById("root"))}},[[391,1,2]]]);
//# sourceMappingURL=main.ff3006ac.chunk.js.map